{"version":3,"sources":["../../src/pages/login/login.ngfactory.js","../../src/pages/login/login.ts","../../src/pages/login/login.module.ts","../../src/pages/login/login.module.ngfactory.js","../../node_modules/firebase/index.js","../../node_modules/firebase/messaging/index.js","../../node_modules/@firebase/messaging/dist/esm/index.js","../../node_modules/@firebase/messaging/dist/esm/src/models/errors.js","../../node_modules/@firebase/messaging/dist/esm/src/helpers/array-buffer-to-base64.js","../../node_modules/@firebase/messaging/dist/esm/src/models/fcm-details.js","../../node_modules/@firebase/messaging/dist/esm/src/models/token-manager.js","../../node_modules/@firebase/messaging/dist/esm/src/models/notification-permission.js","../../node_modules/@firebase/messaging/dist/esm/src/controllers/controller-interface.js","../../node_modules/@firebase/messaging/dist/esm/src/models/worker-page-message.js","../../node_modules/@firebase/messaging/dist/esm/src/models/default-sw.js","../../node_modules/@firebase/messaging/dist/esm/src/controllers/window-controller.js","../../node_modules/@firebase/messaging/dist/esm/src/controllers/sw-controller.js","../../node_modules/firebase/storage/index.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/error.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/string.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/taskenums.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/object.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/promise_external.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/type.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/json.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/path.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/url.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/metadata.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/args.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/fs.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/array.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/requests.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/async.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/request.js","../../node_modules/@firebase/storage/dist/esm/index.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/xhrio.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/constants.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/xhrio_network.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/xhriopool.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/location.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/blob.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/requestinfo.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/observer.js","../../node_modules/@firebase/storage/dist/esm/src/tasksnapshot.js","../../node_modules/@firebase/storage/dist/esm/src/task.js","../../node_modules/@firebase/storage/dist/esm/src/reference.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/failrequest.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/requestmap.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/authwrapper.js","../../node_modules/@firebase/storage/dist/esm/src/implementation/backoff.js","../../node_modules/@firebase/storage/dist/esm/src/service.js"],"names":["View_LoginPage_0","_l","core","content_ngfactory","content","config","platform","dom_controller","app","keyboard","view_controller","nav_controller","row","col","_v","en","$event","ad","component","loginEmail","button_ngfactory","button_button","color","block","icon","name","loginFB","condiciones","clear","AyudaPage","_ck","statusbarPadding","_hasRefresher","_hidden","login_LoginPage","LoginPage","navCtrl","navParams","menu","fb","alertCtrl","toastCtrl","loadingCtrl","angularFirestore","this","isLoggedIn","swipeEnable","prototype","push","ionViewDidLoad","_this","Array","login","then","response","credentials","firebase_default","a","auth","FacebookAuthProvider","credential","authResponse","accessToken","signInWithCredential","data","console","log","collection","doc","uid","valueChanges","subscribe","profile_action","length","displayName","set","photo","photoURL","emai","email","catch","error","alert","setRoot","LoginPageModule","RenderType_LoginPage","encapsulation","styles","LoginPageNgFactory","nav_params","menu_controller","facebook","alert_controller","toast_controller","loading_controller","firestore","__webpack_require__","d","__webpack_exports__","LoginPageModuleNgFactory","action_sheet_component_ngfactory","alert_component_ngfactory","app_root_ngfactory","loading_component_ngfactory","modal_component_ngfactory","picker_component_ngfactory","popover_component_ngfactory","select_popover_component_ngfactory","toast_component_ngfactory","common","esm5_forms","ionic_angular_module","module_loader","firebase","module","exports","registerMessaging","instance","INTERNAL","registerService","self","sw_controller","window_controller","Messaging","_a","CODES","AVAILABLE_IN_WINDOW","AVAILABLE_IN_SW","SHOULD_BE_INHERITED","BAD_SENDER_ID","INCORRECT_GCM_SENDER_ID","PERMISSION_DEFAULT","PERMISSION_BLOCKED","UNSUPPORTED_BROWSER","NOTIFICATIONS_BLOCKED","FAILED_DEFAULT_REGISTRATION","SW_REGISTRATION_EXPECTED","GET_SUBSCRIPTION_FAILED","INVALID_SAVED_TOKEN","SW_REG_REDUNDANT","TOKEN_SUBSCRIBE_FAILED","TOKEN_SUBSCRIBE_NO_TOKEN","TOKEN_SUBSCRIBE_NO_PUSH_SET","USE_SW_BEFORE_GET_TOKEN","INVALID_DELETE_TOKEN","DELETE_TOKEN_NOT_FOUND","DELETE_SCOPE_NOT_FOUND","BG_HANDLER_FUNCTION_EXPECTED","NO_WINDOW_CLIENT_TO_MSG","UNABLE_TO_RESUBSCRIBE","NO_FCM_TOKEN_FOR_RESUBSCRIBE","FAILED_TO_DELETE_TOKEN","NO_SW_IN_REG","BAD_SCOPE","BAD_VAPID_KEY","BAD_SUBSCRIPTION","BAD_TOKEN","BAD_PUSH_SET","FAILED_DELETE_VAPID_KEY","errors","codes","map","array_buffer_to_base64","arrayBuffer","uint8Version","Uint8Array","window","btoa","String","fromCharCode","apply","toBase64","replace","FCM_APPLICATION_SERVER_KEY","fcm_details","ENDPOINT","APPLICATION_SERVER_KEY","SUBSCRIPTION_OPTIONS","userVisibleOnly","applicationServerKey","FCM_TOKEN_OBJ_STORE","token_manager","TokenManager","errorFactory_","cjs","openDbPromise_","openDatabase_","Promise","resolve","reject","request","indexedDB","open","DB_NAME","onerror","event","target","onsuccess","result","onupgradeneeded","objectStore","createObjectStore","keyPath","createIndex","unique","closeDatabase","db","close","getTokenDetailsFromToken","fcmToken","transaction","index","get","getTokenDetailsFromSWScope_","swScope","scopeRequest","getAllTokenDetailsForSenderId_","senderId","senderIdTokens","cursorRequest","openCursor","cursor","value","continue","subscribeToFCM","subscription","pushSet","p256dh","fcmSubscribeBody","endpoint","headers","Headers","append","subscribeOptions","method","body","fetch","json","fcmTokenResponse","create","message","token","isSameSubscription_","masterTokenDetails","saveTokenDetails_","swRegistration","fcmPushSet","details","scope","fcmSenderId","put","getSavedToken","ServiceWorkerRegistration","allTokenDetails","findIndex","tokenDetails","pushManager","getSubscription","err","createToken","fcmTokenDetails","sub","deleteToken","delete","notification_permission","SENDER_ID_OPTION_NAME","controller_interface","ControllerInterface","options","messagingSenderId_","tokenManager_","getToken","currentPermission","getNotificationPermission_","getSWRegistration_","registration","unsubscribe","requestPermission","useServiceWorker","onMessage","nextOrObserver","optError","optCompleted","onTokenRefresh","setBackgroundMessageHandler","callback","Notification","permission","getTokenManager","PARAMS","TYPE_OF_MSG","DATA","worker_page_message","PUSH_MSG_RECEIVED","NOTIFICATION_CLICKED","msgType","msgData","default_sw","__extends","extendStatics","Object","setPrototypeOf","__proto__","b","p","hasOwnProperty","__","constructor","_super","WindowController","call","messageObserver_","onMessage_","observer","tokenRefreshObserver_","onTokenRefresh_","setupSWMessageListener_","isSupported_","manifestCheck_","manifestCheckPromise_","manifestTag","document","querySelector","href","manifestContent","managePermissionResult","permissionPromise","registrationToUse_","waitForRegistrationToActivate_","serviceWorker","installing","waiting","active","state","stateChangeListener","removeEventListener","addEventListener","navigator","register","browserErrorMessage","update","workerPageMessage","next","PushSubscription","sw_controller___extends","SWController","e","onPush_","onSubChange_","onNotificationClick_","bgMessageHandler_","msgPayload","handleMsgPromise","hasVisibleClients_","hasVisibleClients","notification","sendMessageToWindowClients_","notificationDetails","getNotificationData_","notificationTitle","title","showNotification","waitUntil","promiseChain","tokenManager","newSubscription","stopImmediatePropagation","clickAction","getWindowClient_","windowClient","clients","openWindow","internalMsg","attemptToMessageClient_","notificationInformation","assign","url","parsedURL","URL","matchAll","type","includeUncontrolled","clientList","suitableClient","i","focus","client","postMessage","some","visibilityState","all","esm","prependCode","code","unknown","FirebaseStorageError","Code","UNKNOWN","error_canceled","CANCELED","cannotSliceBlob","CANNOT_SLICE_BLOB","invalidArgument","fnName","INVALID_ARGUMENT","appDeleted","APP_DELETED","invalidFormat","format","INVALID_FORMAT","internalError","INTERNAL_ERROR","formatValidator","stringFormat","StringFormat","RAW","BASE64","BASE64URL","DATA_URL","dataFromString","string","StringData","utf8Bytes_","base64Bytes_","parts","string_DataURLParts","base64","rest","decoded","decodeURIComponent","percentEncodedBytes_","dataURLBytes_","contentType","dataURLContentType_","c","charCodeAt","hi","lo","hasMinus","indexOf","hasUnder","invalidChar","hasPlus","hasSlash","bytes","atob","array","taskStateFromInternalTaskState","InternalTaskState","RUNNING","PAUSING","CANCELING","TaskState","PAUSED","SUCCESS","ERROR","contains","obj","prop","forEach","f","key","clone","val","make","resolver","promise_external_resolve","isDef","isJustDef","isFunction","isObject","isNonNullObject","isString","isNativeBlob","isNativeBlobDefined","Blob","jsonObjectOrNull","s","JSON","parse","isArray","isNonArrayObject","lastComponent","path","lastIndexOf","slice","makeNormalUrl","urlPart","domainBase","apiBaseUrl","makeUploadUrl","apiUploadBaseUrl","makeQueryString","params","encode","encodeURIComponent","queryPart","nextPart","getMappings","mappings_","mappings","Mapping","nameMapping","xform","metadata","fullPath","xformPath","sizeMapping","size","tokens","split","downloadBase","makeDownloadUrl","alt","fromResource","authWrapper","resource","len","mapping","local","server","defineProperty","loc","location_Location","makeStorageReference","addRef","toResourceString","writable","stringify","metadataValidator","validate","specs","passed","minArgs","maxArgs","optional","argMin","argMax","real","countPart","plural","INVALID_ARGUMENT_COUNT","invalidArgumentCount","validator","Error","stringSpec","opt_validator","opt_optional","stringValidator","v1","v2","and_","args_ArgSpec","metadataSpec","nonNegativeNumberSpec","Number","looseObjectSpec","undefined","nullFunctionSpec","getBlob","var_args","_i","arguments","BlobBuilder","WebKitBlobBuilder","bb","array_contains","elem","handlerCheck","cndn","metadataHandler","xhr","text","resourceString","fromResourceString","sharedErrorHandler","location","newErr","getStatus","UNAUTHENTICATED","QUOTA_EXCEEDED","bucket","UNAUTHORIZED","setServerResponseProp","serverResponseProp","objectErrorHandler","shared","OBJECT_NOT_FOUND","getMetadata","fullServerUrl","timeout","maxOperationRetryTime","requestInfo","RequestInfo","errorHandler","metadataForUpload_","blob","opt_metadata","determineContentType_","checkResumeHeader_","opt_allowed","status","getResponseHeader","continueResumableUpload","chunkSize","opt_status","opt_progressCallback","ResumableUploadStatus","current","total","SERVER_FILE_WRONG_SIZE","bytesLeft","bytesToUpload","Math","min","startByte","X-Goog-Upload-Command","X-Goog-Upload-Offset","maxUploadRetryTime","uploadStatus","newCurrent","uploadData","progressCallback","async_async","argsToForward","makeRequest","authToken","pool","urlParams","addAuthHeader_","SDK_VERSION","addVersionHeader_","request_NetworkRequest","successCodes","additionalRetryCodes","handler","factory","unused","opt_url","service_Service","xhriopool_XhrIoPool","registerStorage","STORAGE_TYPE","TaskEvent","Storage","Reference","reference_Reference","ErrorCode","configOption","defaultMaxOperationRetryTime","defaultMaxUploadRetryTime","minSafeInteger","code_","message_","serverResponse_","name_","codeProp","codeEquals","serverResponse","enumerable","configurable","BUCKET_NOT_FOUND","PROJECT_NOT_FOUND","RETRY_LIMIT_EXCEEDED","INVALID_CHECKSUM","INVALID_EVENT_NAME","INVALID_URL","INVALID_DEFAULT_BUCKET","NO_DEFAULT_BUCKET","NO_DOWNLOAD_URL","INVALID_ROOT_OPERATION","opt_contentType","dataURL","matches","match","middle","end","substring","endsWith","STATE_CHANGED","xhrio_network_NetworkXhrIo","NetworkXhrIo","sent_","xhr_","XMLHttpRequest","errorCode_","NO_ERROR","sendPromise_","ABORT","NETWORK_ERROR","send","opt_body","opt_headers","setRequestHeader","toString","getErrorCode","getResponseText","responseText","abort","header","addUploadProgressListener","listener","upload","removeUploadProgressListener","XhrIoPool","createXhrIo","Location","path_","bucketOnlyServerUrl","makeFromBucketSpec","bucketString","bucketLocation","makeFromUrl","invalidDefaultBucket","bucketDomain","groups","regex","RegExp","indices","postModify","charAt","group","captures","exec","pathValue","invalidUrl","opt_local","opt_writable","opt_xform","blob_FbsBlob","FbsBlob","opt_elideCopy","blobType","data_","ArrayBuffer","byteLength","size_","type_","endByte","sliced","start","webkitSlice","mozSlice","sliceBlob","buffer","blobby","uint8Arrays","finalLength_1","merged_1","index_1","finalized","observer_Observer","opt_error","opt_complete","complete","UploadTaskSnapshot","bytesTransferred","totalBytes","task","ref","urls","task_UploadTask","UploadTask","transferred_","needToFetchStatus_","needToFetchMetadata_","observers_","error_","uploadUrl_","request_","chunkMultiplier_","resolve_","reject_","ref_","authWrapper_","location_","blob_","metadata_","resumable_","shouldDoResumable_","state_","errorHandler_","completeTransitions_","transition_","metadataErrorHandler_","promise_","start_","makeProgressCallback_","sizeBefore","loaded","updateProgress_","createResumable_","fetchStatus_","fetchMetadata_","continueUpload_","oneShotUpload_","resolveToken_","getAuthToken","X-Goog-Upload-Protocol","X-Goog-Upload-Header-Content-Length","X-Goog-Upload-Header-Content-Type","Content-Type","createResumableUpload","createRequest","getPromise","sizeString","parseInt","isNaN","getResumableUploadStatus","statusRequest","uploadRequest","newStatus","increaseMultiplier_","metadataRequest","boundary","str","random","genBoundary","metadataString","multipartUpload","multipartRequest","transferred","old","notifyObservers_","cancel","wasPaused","externalState","on","completed","nextOrObserverValidator","nextValidator","observerValidator","nextOrObserverMessage","makeBinder","addObserver_","removeObserver_","_p","binderSpecs","onFulfilled","onRejected","notifyObserver_","splice","remove","finishPromise_","arraylike","array_clone","triggered","bind","snapshot","resume","valid","pause","newRef","child","childPath","newPath","canonicalChildPath","filter","join","path_parent","service","throwIfRoot_","putString","deleteObject","updateMetadata","getDownloadURL","invalidRootOperation","failrequest_FailRequest","FailRequest","promise_external_reject","appDelete","requestmap_RequestMap","RequestMap","map_","id_","addRequest","r","unmap","id","authwrapper_AuthWrapper","AuthWrapper","maker","requestMaker","bucket_","deleted_","app_","extractBucket_","storageRefMaker_","requestMaker_","pool_","service_","maxOperationRetryTime_","maxUploadRetryTime_","requestMap_","_error","deleteApp","setMaxUploadRetryTime","time","setMaxOperationRetryTime","NetworkRequest","errorCallback","pendingXhr_","backoffId_","canceled_","appDelete_","url_","method_","headers_","body_","successCodes_","additionalRetryCodes_","callback_","errorCallback_","progressCallback_","timeout_","doTheRequest","backoffCallback","canceled","progressListener","progressEvent","lengthComputable","RequestEndStatus","hitServer","isRetryStatusCode_","successCode","wasCanceled","backoffDone","requestWentThrough","wasSuccessCode","cancelState","triggerCallback","triggeredCallback","callWithDelay","millis","timeoutId","setTimeout","success","hitTimeout","waitSeconds","waitMillis","stop","wasTimeout","stopped","clearTimeout","isFiveHundredCode","isExtraRetryCode","isRequestSpecificRetryCode","opt_canceled","Service","authWrapperBucket","internals_","service_ServiceInternals","test","refFromURL","ServiceInternals"],"mappings":"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","sourcesContent":["/**\n* @fileoverview This file is generated by the Angular template compiler.\n* Do not edit.\n* @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride}\n* tslint:disable\n*/ \nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../node_modules/ionic-angular/components/content/content.ngfactory\";\nimport * as i2 from \"ionic-angular/components/content/content\";\nimport * as i3 from \"ionic-angular/config/config\";\nimport * as i4 from \"ionic-angular/platform/platform\";\nimport * as i5 from \"ionic-angular/platform/dom-controller\";\nimport * as i6 from \"ionic-angular/components/app/app\";\nimport * as i7 from \"ionic-angular/platform/keyboard\";\nimport * as i8 from \"ionic-angular/navigation/view-controller\";\nimport * as i9 from \"ionic-angular/navigation/nav-controller\";\nimport * as i10 from \"ionic-angular/components/grid/row\";\nimport * as i11 from \"ionic-angular/components/grid/col\";\nimport * as i12 from \"../../../node_modules/ionic-angular/components/button/button.ngfactory\";\nimport * as i13 from \"ionic-angular/components/button/button\";\nimport * as i14 from \"ionic-angular/components/icon/icon\";\nimport * as i15 from \"./login\";\nimport * as i16 from \"ionic-angular/navigation/nav-params\";\nimport * as i17 from \"ionic-angular/components/app/menu-controller\";\nimport * as i18 from \"@ionic-native/facebook/index\";\nimport * as i19 from \"ionic-angular/components/alert/alert-controller\";\nimport * as i20 from \"ionic-angular/components/toast/toast-controller\";\nimport * as i21 from \"ionic-angular/components/loading/loading-controller\";\nimport * as i22 from \"angularfire2/firestore\";\nvar styles_LoginPage = [];\nvar RenderType_LoginPage = i0.ɵcrt({ encapsulation: 2, styles: styles_LoginPage, data: {} });\nexport { RenderType_LoginPage as RenderType_LoginPage };\nexport function View_LoginPage_0(_l) { return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 35, \"ion-content\", [[\"padding\", \"\"]], [[2, \"statusbar-padding\", null], [2, \"has-refresher\", null]], null, null, i1.View_Content_0, i1.RenderType_Content)), i0.ɵdid(1, 4374528, null, 0, i2.Content, [i3.Config, i4.Platform, i5.DomController, i0.ElementRef, i0.Renderer, i6.App, i7.Keyboard, i0.NgZone, [2, i8.ViewController], [2, i9.NavController]], null, null), (_l()(), i0.ɵted(-1, 1, [\"\\n  \"])), (_l()(), i0.ɵted(-1, 1, [\"\\n  \"])), (_l()(), i0.ɵeld(4, 0, null, 1, 10, \"ion-row\", [[\"class\", \"row\"]], null, null, null, null, null)), i0.ɵdid(5, 16384, null, 0, i10.Row, [], null, null), (_l()(), i0.ɵted(-1, null, [\"\\n    \"])), (_l()(), i0.ɵeld(7, 0, null, null, 6, \"ion-col\", [[\"class\", \"col\"], [\"width-75\", \"\"]], null, null, null, null, null)), i0.ɵdid(8, 16384, null, 0, i11.Col, [], null, null), (_l()(), i0.ɵted(-1, null, [\"\\n      \"])), (_l()(), i0.ɵeld(10, 0, null, null, 0, \"img\", [], null, null, null, null, null)), (_l()(), i0.ɵted(-1, null, [\"\\n      \"])), (_l()(), i0.ɵted(-1, null, [\"\\n      \"])), (_l()(), i0.ɵted(-1, null, [\"\\n    \"])), (_l()(), i0.ɵted(-1, null, [\"\\n  \"])), (_l()(), i0.ɵted(-1, 1, [\"\\n  \"])), (_l()(), i0.ɵeld(16, 0, null, 1, 4, \"button\", [[\"block\", \"\"], [\"color\", \"color-app\"], [\"icon-only\", \"\"], [\"ion-button\", \"\"]], null, [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\n        var pd_0 = (_co.loginEmail() !== false);\n        ad = (pd_0 && ad);\n    } return ad; }, i12.View_Button_0, i12.RenderType_Button)), i0.ɵdid(17, 1097728, null, 0, i13.Button, [[8, \"\"], i3.Config, i0.ElementRef, i0.Renderer], { color: [0, \"color\"], block: [1, \"block\"] }, null), (_l()(), i0.ɵeld(18, 0, null, 0, 1, \"ion-icon\", [[\"name\", \"mail\"], [\"role\", \"img\"]], [[2, \"hide\", null]], null, null, null, null)), i0.ɵdid(19, 147456, null, 0, i14.Icon, [i3.Config, i0.ElementRef, i0.Renderer], { name: [0, \"name\"] }, null), (_l()(), i0.ɵted(-1, 0, [\"Ingresar con el correo\"])), (_l()(), i0.ɵted(-1, 1, [\"\\n  \"])), (_l()(), i0.ɵeld(22, 0, null, 1, 4, \"button\", [[\"block\", \"\"], [\"color\", \"facebook-color\"], [\"icon-only\", \"\"], [\"ion-button\", \"\"]], null, [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\n        var pd_0 = (_co.loginFB() !== false);\n        ad = (pd_0 && ad);\n    } return ad; }, i12.View_Button_0, i12.RenderType_Button)), i0.ɵdid(23, 1097728, null, 0, i13.Button, [[8, \"\"], i3.Config, i0.ElementRef, i0.Renderer], { color: [0, \"color\"], block: [1, \"block\"] }, null), (_l()(), i0.ɵeld(24, 0, null, 0, 1, \"ion-icon\", [[\"name\", \"logo-facebook\"], [\"role\", \"img\"]], [[2, \"hide\", null]], null, null, null, null)), i0.ɵdid(25, 147456, null, 0, i14.Icon, [i3.Config, i0.ElementRef, i0.Renderer], { name: [0, \"name\"] }, null), (_l()(), i0.ɵted(-1, 0, [\"Ingresar con Facebook\"])), (_l()(), i0.ɵted(-1, 1, [\"\\n\\n\\n  \"])), (_l()(), i0.ɵeld(28, 0, null, 1, 2, \"button\", [[\"block\", \"\"], [\"class\", \"condiciones\"], [\"clear\", \"\"], [\"ion-button\", \"\"]], null, [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\n        var pd_0 = (_co.condiciones() !== false);\n        ad = (pd_0 && ad);\n    } return ad; }, i12.View_Button_0, i12.RenderType_Button)), i0.ɵdid(29, 1097728, null, 0, i13.Button, [[8, \"\"], i3.Config, i0.ElementRef, i0.Renderer], { clear: [0, \"clear\"], block: [1, \"block\"] }, null), (_l()(), i0.ɵted(-1, 0, [\"Terminos y Condiciones\"])), (_l()(), i0.ɵted(-1, 1, [\"\\n  \"])), (_l()(), i0.ɵeld(32, 0, null, 1, 2, \"button\", [[\"block\", \"\"], [\"class\", \"dark\"], [\"clear\", \"\"], [\"ion-button\", \"\"]], null, [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\n        var pd_0 = (_co.AyudaPage() !== false);\n        ad = (pd_0 && ad);\n    } return ad; }, i12.View_Button_0, i12.RenderType_Button)), i0.ɵdid(33, 1097728, null, 0, i13.Button, [[8, \"\"], i3.Config, i0.ElementRef, i0.Renderer], { clear: [0, \"clear\"], block: [1, \"block\"] }, null), (_l()(), i0.ɵted(-1, 0, [\"Necesitas ayuda?\"])), (_l()(), i0.ɵted(-1, 1, [\"\\n\"])), (_l()(), i0.ɵted(-1, null, [\"\\n\"]))], function (_ck, _v) { var currVal_2 = \"color-app\"; var currVal_3 = \"\"; _ck(_v, 17, 0, currVal_2, currVal_3); var currVal_5 = \"mail\"; _ck(_v, 19, 0, currVal_5); var currVal_6 = \"facebook-color\"; var currVal_7 = \"\"; _ck(_v, 23, 0, currVal_6, currVal_7); var currVal_9 = \"logo-facebook\"; _ck(_v, 25, 0, currVal_9); var currVal_10 = \"\"; var currVal_11 = \"\"; _ck(_v, 29, 0, currVal_10, currVal_11); var currVal_12 = \"\"; var currVal_13 = \"\"; _ck(_v, 33, 0, currVal_12, currVal_13); }, function (_ck, _v) { var currVal_0 = i0.ɵnov(_v, 1).statusbarPadding; var currVal_1 = i0.ɵnov(_v, 1)._hasRefresher; _ck(_v, 0, 0, currVal_0, currVal_1); var currVal_4 = i0.ɵnov(_v, 19)._hidden; _ck(_v, 18, 0, currVal_4); var currVal_8 = i0.ɵnov(_v, 25)._hidden; _ck(_v, 24, 0, currVal_8); }); }\nexport function View_LoginPage_Host_0(_l) { return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 1, \"page-login\", [], null, null, null, View_LoginPage_0, RenderType_LoginPage)), i0.ɵdid(1, 49152, null, 0, i15.LoginPage, [i9.NavController, i16.NavParams, i17.MenuController, i18.Facebook, i19.AlertController, i20.ToastController, i21.LoadingController, i22.AngularFirestore], null, null)], null, null); }\nvar LoginPageNgFactory = i0.ɵccf(\"page-login\", i15.LoginPage, View_LoginPage_Host_0, {}, {}, []);\nexport { LoginPageNgFactory as LoginPageNgFactory };\n//# sourceMappingURL=login.ngfactory.js.map\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ngfactory.js","import { Component } from '@angular/core';\nimport { NavController, NavParams, MenuController, AlertController, ToastController, LoadingController } from 'ionic-angular';\n\nimport { Facebook, FacebookLoginResponse } from '@ionic-native/facebook';\n\nimport firebase from 'firebase';\n// import { AngularFireAuth } from 'angularfire2/auth';\n// import { User } from '../../models/user';\nimport { AngularFirestore } from 'angularfire2/firestore';\n// import { Observable } from 'rxjs/Observable';\n\n\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n    responseData : any;\n    // userData = {\"username\": \"\",\"password\": \"\"};\n    public userData;\n    // var fb\n    public msgToast: string;\n    public loader;\n    isLoggedIn: boolean = false;\n    authResponse: any;\n    // apiBaseUrl: string = \"http://style2door.com/ws/api.php\";\n    posts: any;\n    // user = {} as User;\n    // private profileCollection: AngularFirestoreCollection<any>;\n    // private profileCollection: Observable<any>;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public  menu: MenuController,\n    public fb: Facebook,\n    public alertCtrl: AlertController,\n    public toastCtrl: ToastController,\n    public loadingCtrl: LoadingController,\n    // private angularFauth:AngularFireAuth,\n    private readonly angularFirestore: AngularFirestore\n  ) {\n\n    this.menu.swipeEnable(false);// deshabilita el sidemenu\n\n  }\n\n\n  loginEmail(){\n    this.navCtrl.push('EmailLoginPage');\n  }\n\n  ionViewDidLoad(){\n    // console.log('ionViewDidLoad LoginPage');\n  }\n\n\n  condiciones(){\n    this.navCtrl.push('TerminosCondicionesPage');\n  }\n\n\n  // Login con Firebase y Facebook\n  loginFB(){\n    let permissions = new Array<string>();\n    permissions = ['public_profile', 'user_friends', 'email'];\n    this.fb.login(permissions).then((response: FacebookLoginResponse) => {\n    let credentials =  firebase.auth.FacebookAuthProvider.credential(response.authResponse.accessToken);\n\n    firebase.auth().signInWithCredential(credentials).then((data) =>{\n              console.log('epa '+data);\n              // crear perfil despues del primer login\n              // this.profileCollection =\n              this.angularFirestore.collection('users' ).doc(`${data.uid}`).collection('client_profile').valueChanges()\n              .subscribe((profile_action)=>{\n                if(profile_action.length === 0 ){\n                  console.log(\"NO Existe y creamos el profile\");\n                  this.angularFirestore.collection('users' ).doc(`${data.uid}`).collection('client_profile')\n                  .doc(`${data.displayName}`).set({\n                    uid: data.uid,\n                    displayName: data.displayName,\n                    photo: data.photoURL,\n                    emai: data.email,\n                    // provider: data.providerIdn\n                  })\n                  .then(function() {\n                      console.log(\"profile creado correctamente! \");\n                  }).catch(function(error) {\n                      alert(error);\n                  });\n                }\n              });\n              // console.log(this.profileCollection);\n              // alert(\"DE DPMDESSSSSSSSS \"+JSON.stringify(info));\n              this.navCtrl.setRoot('TabsHomePage');\n            }).catch((error)=>{\n              console.log(error);\n              alert(error);\n            })\n        //\n    })\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n  exports: [\n    LoginPage\n  ]\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","/**\n* @fileoverview This file is generated by the Angular template compiler.\n* Do not edit.\n* @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride}\n* tslint:disable\n*/ \nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./login.module\";\nimport * as i2 from \"../../../node_modules/ionic-angular/components/action-sheet/action-sheet-component.ngfactory\";\nimport * as i3 from \"../../../node_modules/ionic-angular/components/alert/alert-component.ngfactory\";\nimport * as i4 from \"../../../node_modules/ionic-angular/components/app/app-root.ngfactory\";\nimport * as i5 from \"../../../node_modules/ionic-angular/components/loading/loading-component.ngfactory\";\nimport * as i6 from \"../../../node_modules/ionic-angular/components/modal/modal-component.ngfactory\";\nimport * as i7 from \"../../../node_modules/ionic-angular/components/picker/picker-component.ngfactory\";\nimport * as i8 from \"../../../node_modules/ionic-angular/components/popover/popover-component.ngfactory\";\nimport * as i9 from \"../../../node_modules/ionic-angular/components/select/select-popover-component.ngfactory\";\nimport * as i10 from \"../../../node_modules/ionic-angular/components/toast/toast-component.ngfactory\";\nimport * as i11 from \"./login.ngfactory\";\nimport * as i12 from \"@angular/common\";\nimport * as i13 from \"@angular/forms\";\nimport * as i14 from \"ionic-angular/module\";\nimport * as i15 from \"ionic-angular/util/module-loader\";\nimport * as i16 from \"./login\";\nvar LoginPageModuleNgFactory = i0.ɵcmf(i1.LoginPageModule, [], function (_l) { return i0.ɵmod([i0.ɵmpd(512, i0.ComponentFactoryResolver, i0.ɵCodegenComponentFactoryResolver, [[8, [i2.ActionSheetCmpNgFactory, i3.AlertCmpNgFactory, i4.IonicAppNgFactory, i5.LoadingCmpNgFactory, i6.ModalCmpNgFactory, i7.PickerCmpNgFactory, i8.PopoverCmpNgFactory, i9.SelectPopoverNgFactory, i10.ToastCmpNgFactory, i11.LoginPageNgFactory]], [3, i0.ComponentFactoryResolver], i0.NgModuleRef]), i0.ɵmpd(4608, i12.NgLocalization, i12.NgLocaleLocalization, [i0.LOCALE_ID, [2, i12.ɵa]]), i0.ɵmpd(4608, i13.ɵi, i13.ɵi, []), i0.ɵmpd(4608, i13.FormBuilder, i13.FormBuilder, []), i0.ɵmpd(512, i12.CommonModule, i12.CommonModule, []), i0.ɵmpd(512, i13.ɵba, i13.ɵba, []), i0.ɵmpd(512, i13.FormsModule, i13.FormsModule, []), i0.ɵmpd(512, i13.ReactiveFormsModule, i13.ReactiveFormsModule, []), i0.ɵmpd(512, i14.IonicModule, i14.IonicModule, []), i0.ɵmpd(512, i14.IonicPageModule, i14.IonicPageModule, []), i0.ɵmpd(512, i1.LoginPageModule, i1.LoginPageModule, []), i0.ɵmpd(256, i15.LAZY_LOADED_TOKEN, i16.LoginPage, [])]); });\nexport { LoginPageModuleNgFactory as LoginPageModuleNgFactory };\n//# sourceMappingURL=login.module.ngfactory.js.map\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ngfactory.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar firebase = require('./app');\nrequire('./auth');\nrequire('./database');\nrequire('./messaging');\nrequire('./storage');\n\nmodule.exports = firebase;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/firebase/index.js\n// module id = 465\n// module chunks = 1","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nrequire('@firebase/messaging');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/firebase/messaging/index.js\n// module id = 466\n// module chunks = 1","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nimport WindowController from './src/controllers/window-controller';\nimport SWController from './src/controllers/sw-controller';\nimport firebase from '@firebase/app';\nexport function registerMessaging(instance) {\n    var messagingName = 'messaging';\n    var factoryMethod = function (app) {\n        if (self && 'ServiceWorkerGlobalScope' in self) {\n            return new SWController(app);\n        }\n        // Assume we are in the window context.\n        return new WindowController(app);\n    };\n    var namespaceExports = {\n        // no-inline\n        Messaging: WindowController\n    };\n    instance.INTERNAL.registerService(messagingName, factoryMethod, namespaceExports);\n}\nregisterMessaging(firebase);\n\n//# sourceMappingURL=index.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/messaging/dist/esm/index.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nvar CODES = {\n    AVAILABLE_IN_WINDOW: 'only-available-in-window',\n    AVAILABLE_IN_SW: 'only-available-in-sw',\n    SHOULD_BE_INHERITED: 'should-be-overriden',\n    BAD_SENDER_ID: 'bad-sender-id',\n    INCORRECT_GCM_SENDER_ID: 'incorrect-gcm-sender-id',\n    PERMISSION_DEFAULT: 'permission-default',\n    PERMISSION_BLOCKED: 'permission-blocked',\n    UNSUPPORTED_BROWSER: 'unsupported-browser',\n    NOTIFICATIONS_BLOCKED: 'notifications-blocked',\n    FAILED_DEFAULT_REGISTRATION: 'failed-serviceworker-registration',\n    SW_REGISTRATION_EXPECTED: 'sw-registration-expected',\n    GET_SUBSCRIPTION_FAILED: 'get-subscription-failed',\n    INVALID_SAVED_TOKEN: 'invalid-saved-token',\n    SW_REG_REDUNDANT: 'sw-reg-redundant',\n    TOKEN_SUBSCRIBE_FAILED: 'token-subscribe-failed',\n    TOKEN_SUBSCRIBE_NO_TOKEN: 'token-subscribe-no-token',\n    TOKEN_SUBSCRIBE_NO_PUSH_SET: 'token-subscribe-no-push-set',\n    USE_SW_BEFORE_GET_TOKEN: 'use-sw-before-get-token',\n    INVALID_DELETE_TOKEN: 'invalid-delete-token',\n    DELETE_TOKEN_NOT_FOUND: 'delete-token-not-found',\n    DELETE_SCOPE_NOT_FOUND: 'delete-scope-not-found',\n    BG_HANDLER_FUNCTION_EXPECTED: 'bg-handler-function-expected',\n    NO_WINDOW_CLIENT_TO_MSG: 'no-window-client-to-msg',\n    UNABLE_TO_RESUBSCRIBE: 'unable-to-resubscribe',\n    NO_FCM_TOKEN_FOR_RESUBSCRIBE: 'no-fcm-token-for-resubscribe',\n    FAILED_TO_DELETE_TOKEN: 'failed-to-delete-token',\n    NO_SW_IN_REG: 'no-sw-in-reg',\n    BAD_SCOPE: 'bad-scope',\n    BAD_VAPID_KEY: 'bad-vapid-key',\n    BAD_SUBSCRIPTION: 'bad-subscription',\n    BAD_TOKEN: 'bad-token',\n    BAD_PUSH_SET: 'bad-push-set',\n    FAILED_DELETE_VAPID_KEY: 'failed-delete-vapid-key'\n};\nvar ERROR_MAP = (_a = {},\n    _a[CODES.AVAILABLE_IN_WINDOW] = 'This method is available in a Window context.',\n    _a[CODES.AVAILABLE_IN_SW] = 'This method is available in a service worker ' + 'context.',\n    _a[CODES.SHOULD_BE_INHERITED] = 'This method should be overriden by ' + 'extended classes.',\n    _a[CODES.BAD_SENDER_ID] = \"Please ensure that 'messagingSenderId' is set \" +\n        'correctly in the options passed into firebase.initializeApp().',\n    _a[CODES.PERMISSION_DEFAULT] = 'The required permissions were not granted and ' + 'dismissed instead.',\n    _a[CODES.PERMISSION_BLOCKED] = 'The required permissions were not granted and ' + 'blocked instead.',\n    _a[CODES.UNSUPPORTED_BROWSER] = \"This browser doesn't support the API's \" +\n        'required to use the firebase SDK.',\n    _a[CODES.NOTIFICATIONS_BLOCKED] = 'Notifications have been blocked.',\n    _a[CODES.FAILED_DEFAULT_REGISTRATION] = 'We are unable to register the ' +\n        'default service worker. {$browserErrorMessage}',\n    _a[CODES.SW_REGISTRATION_EXPECTED] = 'A service worker registration was the ' + 'expected input.',\n    _a[CODES.GET_SUBSCRIPTION_FAILED] = 'There was an error when trying to get ' +\n        'any existing Push Subscriptions.',\n    _a[CODES.INVALID_SAVED_TOKEN] = 'Unable to access details of the saved token.',\n    _a[CODES.SW_REG_REDUNDANT] = 'The service worker being used for push was made ' + 'redundant.',\n    _a[CODES.TOKEN_SUBSCRIBE_FAILED] = 'A problem occured while subscribing the ' + 'user to FCM: {$message}',\n    _a[CODES.TOKEN_SUBSCRIBE_NO_TOKEN] = 'FCM returned no token when subscribing ' + 'the user to push.',\n    _a[CODES.TOKEN_SUBSCRIBE_NO_PUSH_SET] = 'FCM returned an invalid response ' + 'when getting an FCM token.',\n    _a[CODES.USE_SW_BEFORE_GET_TOKEN] = 'You must call useServiceWorker() before ' +\n        'calling getToken() to ensure your service worker is used.',\n    _a[CODES.INVALID_DELETE_TOKEN] = 'You must pass a valid token into ' +\n        'deleteToken(), i.e. the token from getToken().',\n    _a[CODES.DELETE_TOKEN_NOT_FOUND] = 'The deletion attempt for token could not ' +\n        'be performed as the token was not found.',\n    _a[CODES.DELETE_SCOPE_NOT_FOUND] = 'The deletion attempt for service worker ' +\n        'scope could not be performed as the scope was not found.',\n    _a[CODES.BG_HANDLER_FUNCTION_EXPECTED] = 'The input to ' + 'setBackgroundMessageHandler() must be a function.',\n    _a[CODES.NO_WINDOW_CLIENT_TO_MSG] = 'An attempt was made to message a ' + 'non-existant window client.',\n    _a[CODES.UNABLE_TO_RESUBSCRIBE] = 'There was an error while re-subscribing ' +\n        'the FCM token for push messaging. Will have to resubscribe the ' +\n        'user on next visit. {$message}',\n    _a[CODES.NO_FCM_TOKEN_FOR_RESUBSCRIBE] = 'Could not find an FCM token ' +\n        'and as a result, unable to resubscribe. Will have to resubscribe the ' +\n        'user on next visit.',\n    _a[CODES.FAILED_TO_DELETE_TOKEN] = 'Unable to delete the currently saved token.',\n    _a[CODES.NO_SW_IN_REG] = 'Even though the service worker registration was ' +\n        'successful, there was a problem accessing the service worker itself.',\n    _a[CODES.INCORRECT_GCM_SENDER_ID] = \"Please change your web app manifest's \" +\n        \"'gcm_sender_id' value to '103953800507' to use Firebase messaging.\",\n    _a[CODES.BAD_SCOPE] = 'The service worker scope must be a string with at ' +\n        'least one character.',\n    _a[CODES.BAD_VAPID_KEY] = 'The public VAPID key must be a string with at ' + 'least one character.',\n    _a[CODES.BAD_SUBSCRIPTION] = 'The subscription must be a valid ' + 'PushSubscription.',\n    _a[CODES.BAD_TOKEN] = 'The FCM Token used for storage / lookup was not ' +\n        'a valid token string.',\n    _a[CODES.BAD_PUSH_SET] = 'The FCM push set used for storage / lookup was not ' +\n        'not a valid push set string.',\n    _a[CODES.FAILED_DELETE_VAPID_KEY] = 'The VAPID key could not be deleted.',\n    _a);\nexport default {\n    codes: CODES,\n    map: ERROR_MAP\n};\nvar _a;\n\n//# sourceMappingURL=errors.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/messaging/dist/esm/src/models/errors.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction toBase64(arrayBuffer) {\n    var uint8Version = new Uint8Array(arrayBuffer);\n    return window.btoa(String.fromCharCode.apply(null, uint8Version));\n}\nexport default function (arrayBuffer) {\n    var base64String = toBase64(arrayBuffer);\n    return base64String\n        .replace(/=/g, '')\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_');\n};\n\n//# sourceMappingURL=array-buffer-to-base64.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/messaging/dist/esm/src/helpers/array-buffer-to-base64.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nvar FCM_APPLICATION_SERVER_KEY = [\n    0x04,\n    0x33,\n    0x94,\n    0xf7,\n    0xdf,\n    0xa1,\n    0xeb,\n    0xb1,\n    0xdc,\n    0x03,\n    0xa2,\n    0x5e,\n    0x15,\n    0x71,\n    0xdb,\n    0x48,\n    0xd3,\n    0x2e,\n    0xed,\n    0xed,\n    0xb2,\n    0x34,\n    0xdb,\n    0xb7,\n    0x47,\n    0x3a,\n    0x0c,\n    0x8f,\n    0xc4,\n    0xcc,\n    0xe1,\n    0x6f,\n    0x3c,\n    0x8c,\n    0x84,\n    0xdf,\n    0xab,\n    0xb6,\n    0x66,\n    0x3e,\n    0xf2,\n    0x0c,\n    0xd4,\n    0x8b,\n    0xfe,\n    0xe3,\n    0xf9,\n    0x76,\n    0x2f,\n    0x14,\n    0x1c,\n    0x63,\n    0x08,\n    0x6a,\n    0x6f,\n    0x2d,\n    0xb1,\n    0x1a,\n    0x95,\n    0xb0,\n    0xce,\n    0x37,\n    0xc0,\n    0x9c,\n    0x6e\n];\nvar SUBSCRIPTION_DETAILS = {\n    userVisibleOnly: true,\n    applicationServerKey: new Uint8Array(FCM_APPLICATION_SERVER_KEY)\n};\nexport default {\n    ENDPOINT: 'https://fcm.googleapis.com',\n    APPLICATION_SERVER_KEY: FCM_APPLICATION_SERVER_KEY,\n    SUBSCRIPTION_OPTIONS: SUBSCRIPTION_DETAILS\n};\n\n//# sourceMappingURL=fcm-details.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/messaging/dist/esm/src/models/fcm-details.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nimport { ErrorFactory } from '@firebase/util';\nimport Errors from './errors';\nimport arrayBufferToBase64 from '../helpers/array-buffer-to-base64';\nimport FCMDetails from './fcm-details';\nvar FCM_TOKEN_OBJ_STORE = 'fcm_token_object_Store';\nvar FCM_TOKEN_DETAILS_DB_VERSION = 1;\nvar TokenManager = /** @class */ (function () {\n    function TokenManager() {\n        this.errorFactory_ = new ErrorFactory('messaging', 'Messaging', Errors.map);\n        this.openDbPromise_ = null;\n    }\n    /**\n     * Get the indexedDB as a promsie.\n     * @private\n     * @return {Promise<IDBDatabase>} The IndexedDB database\n     */\n    TokenManager.prototype.openDatabase_ = function () {\n        if (this.openDbPromise_) {\n            return this.openDbPromise_;\n        }\n        this.openDbPromise_ = new Promise(function (resolve, reject) {\n            var request = indexedDB.open(TokenManager.DB_NAME, FCM_TOKEN_DETAILS_DB_VERSION);\n            request.onerror = function (event) {\n                reject(event.target.error);\n            };\n            request.onsuccess = function (event) {\n                resolve(event.target.result);\n            };\n            request.onupgradeneeded = function (event) {\n                var db = event.target.result;\n                var objectStore = db.createObjectStore(FCM_TOKEN_OBJ_STORE, {\n                    keyPath: 'swScope'\n                });\n                // Make sure the sender ID can be searched\n                objectStore.createIndex('fcmSenderId', 'fcmSenderId', {\n                    unique: false\n                });\n                objectStore.createIndex('fcmToken', 'fcmToken', {\n                    unique: true\n                });\n            };\n        });\n        return this.openDbPromise_;\n    };\n    /**\n     * Close the currently open database.\n     * @return {Promise<?>} Returns the result of the promise chain.\n     */\n    TokenManager.prototype.closeDatabase = function () {\n        var _this = this;\n        if (this.openDbPromise_) {\n            return this.openDbPromise_.then(function (db) {\n                db.close();\n                _this.openDbPromise_ = null;\n            });\n        }\n        return Promise.resolve();\n    };\n    /**\n     * Given a token, this method will look up the details in indexedDB.\n     * @public\n     * @param {string} fcmToken\n     * @return {Promise<Object>} The details associated with that token.\n     */\n    TokenManager.prototype.getTokenDetailsFromToken = function (fcmToken) {\n        return this.openDatabase_().then(function (db) {\n            return new Promise(function (resolve, reject) {\n                var transaction = db.transaction([FCM_TOKEN_OBJ_STORE]);\n                var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);\n                var index = objectStore.index('fcmToken');\n                var request = index.get(fcmToken);\n                request.onerror = function (event) {\n                    reject(event.target.error);\n                };\n                request.onsuccess = function (event) {\n                    resolve(event.target.result);\n                };\n            });\n        });\n    };\n    TokenManager.prototype.getTokenDetailsFromSWScope_ = function (swScope) {\n        return this.openDatabase_().then(function (db) {\n            return new Promise(function (resolve, reject) {\n                var transaction = db.transaction([FCM_TOKEN_OBJ_STORE]);\n                var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);\n                var scopeRequest = objectStore.get(swScope);\n                scopeRequest.onerror = function (event) {\n                    reject(event.target.error);\n                };\n                scopeRequest.onsuccess = function (event) {\n                    resolve(event.target.result);\n                };\n            });\n        });\n    };\n    TokenManager.prototype.getAllTokenDetailsForSenderId_ = function (senderId) {\n        return this.openDatabase_().then(function (db) {\n            return new Promise(function (resolve, reject) {\n                var transaction = db.transaction([FCM_TOKEN_OBJ_STORE]);\n                var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);\n                var senderIdTokens = [];\n                var cursorRequest = objectStore.openCursor();\n                cursorRequest.onerror = function (event) {\n                    reject(event.target.error);\n                };\n                cursorRequest.onsuccess = function (event) {\n                    var cursor = event.target.result;\n                    if (cursor) {\n                        if (cursor.value['fcmSenderId'] === senderId) {\n                            senderIdTokens.push(cursor.value);\n                        }\n                        cursor.continue();\n                    }\n                    else {\n                        resolve(senderIdTokens);\n                    }\n                };\n            });\n        });\n    };\n    /**\n     * Given a PushSubscription and messagingSenderId, get an FCM token.\n     * @public\n     * @param  {string} senderId The 'messagingSenderId' to tie the token to.\n     * @param  {PushSubscription} subscription The PushSusbcription to \"federate\".\n     * @param  {string=} pushSet If defined this will swap the subscription for\n     * matching FCM token.\n     * @return {Promise<!Object>} Returns the FCM token to be used in place\n     * of the PushSubscription.\n     */\n    TokenManager.prototype.subscribeToFCM = function (senderId, subscription, pushSet) {\n        var _this = this;\n        var p256dh = arrayBufferToBase64(subscription['getKey']('p256dh'));\n        var auth = arrayBufferToBase64(subscription['getKey']('auth'));\n        var fcmSubscribeBody = \"authorized_entity=\" + senderId + \"&\" +\n            (\"endpoint=\" + subscription.endpoint + \"&\") +\n            (\"encryption_key=\" + p256dh + \"&\") +\n            (\"encryption_auth=\" + auth);\n        if (pushSet) {\n            fcmSubscribeBody += \"&pushSet=\" + pushSet;\n        }\n        var headers = new Headers();\n        headers.append('Content-Type', 'application/x-www-form-urlencoded');\n        var subscribeOptions = {\n            method: 'POST',\n            headers: headers,\n            body: fcmSubscribeBody\n        };\n        return fetch(FCMDetails.ENDPOINT + '/fcm/connect/subscribe', subscribeOptions)\n            .then(function (response) { return response.json(); })\n            .then(function (response) {\n            var fcmTokenResponse = response;\n            if (fcmTokenResponse['error']) {\n                var message = fcmTokenResponse['error']['message'];\n                throw _this.errorFactory_.create(Errors.codes.TOKEN_SUBSCRIBE_FAILED, {\n                    message: message\n                });\n            }\n            if (!fcmTokenResponse['token']) {\n                throw _this.errorFactory_.create(Errors.codes.TOKEN_SUBSCRIBE_NO_TOKEN);\n            }\n            if (!fcmTokenResponse['pushSet']) {\n                throw _this.errorFactory_.create(Errors.codes.TOKEN_SUBSCRIBE_NO_PUSH_SET);\n            }\n            return {\n                token: fcmTokenResponse['token'],\n                pushSet: fcmTokenResponse['pushSet']\n            };\n        });\n    };\n    /**\n     * Checks the that fields in the PushSubscription are equivalent to the\n     * details stores in the masterTokenDetails.\n     * @private\n     * @param  {PushSubscription} subscription The push subscription we expect\n     * the master token to match.\n     * @param  {Object}  masterTokenDetails The saved details we wish to compare\n     * with the PushSubscription\n     * @return {boolean} true if the subscription and token details are\n     * equivalent.\n     */\n    TokenManager.prototype.isSameSubscription_ = function (subscription, masterTokenDetails) {\n        // getKey() isn't defined in the PushSubscription externs file, hence\n        // subscription['getKey']('<key name>').\n        return (subscription.endpoint === masterTokenDetails['endpoint'] &&\n            arrayBufferToBase64(subscription['getKey']('auth')) ===\n                masterTokenDetails['auth'] &&\n            arrayBufferToBase64(subscription['getKey']('p256dh')) ===\n                masterTokenDetails['p256dh']);\n    };\n    /**\n     * Save the details for the fcm token for re-use at a later date.\n     * @private\n     * @param  {string} senderId The 'messagingSenderId' used for this project\n     * @param  {ServiceWorkerRegistration} swRegistration The service worker\n     * used to subscribe the user for web push\n     * @param  {PushSubscription} subscription The push subscription passed to\n     * FCM for the current token.\n     * @param  {string} fcmToken The FCM token currently used on this\n     * device.\n     * @param  {string} fcmPushSet The FCM push tied to the fcm token.\n     * @return {Promise<void>}\n     */\n    TokenManager.prototype.saveTokenDetails_ = function (senderId, swRegistration, subscription, fcmToken, fcmPushSet) {\n        var details = {\n            swScope: swRegistration.scope,\n            endpoint: subscription.endpoint,\n            auth: arrayBufferToBase64(subscription['getKey']('auth')),\n            p256dh: arrayBufferToBase64(subscription['getKey']('p256dh')),\n            fcmToken: fcmToken,\n            fcmPushSet: fcmPushSet,\n            fcmSenderId: senderId\n        };\n        return this.openDatabase_().then(function (db) {\n            return new Promise(function (resolve, reject) {\n                var transaction = db.transaction([FCM_TOKEN_OBJ_STORE], 'readwrite');\n                var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);\n                var request = objectStore.put(details);\n                request.onerror = function (event) {\n                    reject(event.target.error);\n                };\n                request.onsuccess = function (event) {\n                    resolve();\n                };\n            });\n        });\n    };\n    /**\n     * Returns the saved FCM Token if one is available and still valid,\n     * otherwise `null` is returned.\n     * @param {string} senderId This should be the sender ID associated with the\n     * FCM Token being retrieved.\n     * @param {ServiceWorkerRegistration} swRegistration Registration to be used\n     * to subscribe the user to push.\n     * @return {Promise<string> | Promise} Returns the saved FCM Token if\n     * avilable and valid.\n     * @export\n     */\n    TokenManager.prototype.getSavedToken = function (senderId, swRegistration) {\n        var _this = this;\n        if (!(swRegistration instanceof ServiceWorkerRegistration)) {\n            return Promise.reject(this.errorFactory_.create(Errors.codes.SW_REGISTRATION_EXPECTED));\n        }\n        if (typeof senderId !== 'string' || senderId.length === 0) {\n            return Promise.reject(this.errorFactory_.create(Errors.codes.BAD_SENDER_ID));\n        }\n        return this.getAllTokenDetailsForSenderId_(senderId)\n            .then(function (allTokenDetails) {\n            if (allTokenDetails.length === 0) {\n                return;\n            }\n            var index = allTokenDetails.findIndex(function (tokenDetails) {\n                return (swRegistration.scope === tokenDetails['swScope'] &&\n                    senderId === tokenDetails['fcmSenderId']);\n            });\n            if (index === -1) {\n                return;\n            }\n            return allTokenDetails[index];\n        })\n            .then(function (tokenDetails) {\n            if (!tokenDetails) {\n                return;\n            }\n            return swRegistration.pushManager\n                .getSubscription()\n                .catch(function (err) {\n                throw _this.errorFactory_.create(Errors.codes.GET_SUBSCRIPTION_FAILED);\n            })\n                .then(function (subscription) {\n                if (subscription &&\n                    _this.isSameSubscription_(subscription, tokenDetails)) {\n                    return tokenDetails['fcmToken'];\n                }\n            });\n        });\n    };\n    /**\n     * Creates a new FCM token.\n     */\n    TokenManager.prototype.createToken = function (senderId, swRegistration) {\n        var _this = this;\n        if (typeof senderId !== 'string' || senderId.length === 0) {\n            return Promise.reject(this.errorFactory_.create(Errors.codes.BAD_SENDER_ID));\n        }\n        if (!(swRegistration instanceof ServiceWorkerRegistration)) {\n            return Promise.reject(this.errorFactory_.create(Errors.codes.SW_REGISTRATION_EXPECTED));\n        }\n        // Check for existing subscription first\n        var subscription;\n        var fcmTokenDetails;\n        return swRegistration.pushManager\n            .getSubscription()\n            .then(function (subscription) {\n            if (subscription) {\n                return subscription;\n            }\n            return swRegistration.pushManager.subscribe(FCMDetails.SUBSCRIPTION_OPTIONS);\n        })\n            .then(function (sub) {\n            subscription = sub;\n            return _this.subscribeToFCM(senderId, subscription);\n        })\n            .then(function (tokenDetails) {\n            fcmTokenDetails = tokenDetails;\n            return _this.saveTokenDetails_(senderId, swRegistration, subscription, fcmTokenDetails['token'], fcmTokenDetails['pushSet']);\n        })\n            .then(function () { return fcmTokenDetails['token']; });\n    };\n    /**\n     * This method deletes details of the current FCM token.\n     * It's returning a promise in case we need to move to an async\n     * method for deleting at a later date.\n     * @param {string} token Token to be deleted\n     * @return {Promise<Object>} Resolves once the FCM token details have been\n     * deleted and returns the deleted details.\n     */\n    TokenManager.prototype.deleteToken = function (token) {\n        var _this = this;\n        if (typeof token !== 'string' || token.length === 0) {\n            return Promise.reject(this.errorFactory_.create(Errors.codes.INVALID_DELETE_TOKEN));\n        }\n        return this.getTokenDetailsFromToken(token).then(function (details) {\n            if (!details) {\n                throw _this.errorFactory_.create(Errors.codes.DELETE_TOKEN_NOT_FOUND);\n            }\n            return _this.openDatabase_().then(function (db) {\n                return new Promise(function (resolve, reject) {\n                    var transaction = db.transaction([FCM_TOKEN_OBJ_STORE], 'readwrite');\n                    var objectStore = transaction.objectStore(FCM_TOKEN_OBJ_STORE);\n                    var request = objectStore.delete(details['swScope']);\n                    request.onerror = function (event) {\n                        reject(event.target.error);\n                    };\n                    request.onsuccess = function (event) {\n                        if (event.target.result === 0) {\n                            reject(_this.errorFactory_.create(Errors.codes.FAILED_TO_DELETE_TOKEN));\n                            return;\n                        }\n                        resolve(details);\n                    };\n                });\n            });\n        });\n    };\n    return TokenManager;\n}());\nexport default TokenManager;\n\n//# sourceMappingURL=token-manager.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/messaging/dist/esm/src/models/token-manager.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nexport default {\n    granted: 'granted',\n    default: 'default',\n    denied: 'denied'\n};\n\n//# sourceMappingURL=notification-permission.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/messaging/dist/esm/src/models/notification-permission.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nimport { ErrorFactory } from '@firebase/util';\nimport Errors from '../models/errors';\nimport TokenManager from '../models/token-manager';\nimport NOTIFICATION_PERMISSION from '../models/notification-permission';\nvar SENDER_ID_OPTION_NAME = 'messagingSenderId';\nvar ControllerInterface = /** @class */ (function () {\n    /**\n     * An interface of the Messaging Service API\n     * @param {!firebase.app.App} app\n     */\n    function ControllerInterface(app) {\n        var _this = this;\n        this.errorFactory_ = new ErrorFactory('messaging', 'Messaging', Errors.map);\n        if (!app.options[SENDER_ID_OPTION_NAME] ||\n            typeof app.options[SENDER_ID_OPTION_NAME] !== 'string') {\n            throw this.errorFactory_.create(Errors.codes.BAD_SENDER_ID);\n        }\n        this.messagingSenderId_ = app.options[SENDER_ID_OPTION_NAME];\n        this.tokenManager_ = new TokenManager();\n        this.app = app;\n        this.INTERNAL = {};\n        this.INTERNAL.delete = function () { return _this.delete; };\n    }\n    /**\n     * @export\n     * @return {Promise<string> | Promise<null>} Returns a promise that\n     * resolves to an FCM token.\n     */\n    ControllerInterface.prototype.getToken = function () {\n        var _this = this;\n        // Check with permissions\n        var currentPermission = this.getNotificationPermission_();\n        if (currentPermission !== NOTIFICATION_PERMISSION.granted) {\n            if (currentPermission === NOTIFICATION_PERMISSION.denied) {\n                return Promise.reject(this.errorFactory_.create(Errors.codes.NOTIFICATIONS_BLOCKED));\n            }\n            // We must wait for permission to be granted\n            return Promise.resolve(null);\n        }\n        return this.getSWRegistration_().then(function (registration) {\n            return _this.tokenManager_\n                .getSavedToken(_this.messagingSenderId_, registration)\n                .then(function (token) {\n                if (token) {\n                    return token;\n                }\n                return _this.tokenManager_.createToken(_this.messagingSenderId_, registration);\n            });\n        });\n    };\n    /**\n     * This method deletes tokens that the token manager looks after and then\n     * unregisters the push subscription if it exists.\n     * @export\n     * @param {string} token\n     * @return {Promise<void>}\n     */\n    ControllerInterface.prototype.deleteToken = function (token) {\n        var _this = this;\n        return this.tokenManager_.deleteToken(token).then(function () {\n            return _this.getSWRegistration_()\n                .then(function (registration) {\n                if (registration) {\n                    return registration.pushManager.getSubscription();\n                }\n            })\n                .then(function (subscription) {\n                if (subscription) {\n                    return subscription.unsubscribe();\n                }\n            });\n        });\n    };\n    ControllerInterface.prototype.getSWRegistration_ = function () {\n        throw this.errorFactory_.create(Errors.codes.SHOULD_BE_INHERITED);\n    };\n    //\n    // The following methods should only be available in the window.\n    //\n    ControllerInterface.prototype.requestPermission = function () {\n        throw this.errorFactory_.create(Errors.codes.AVAILABLE_IN_WINDOW);\n    };\n    /**\n     * @export\n     * @param {!ServiceWorkerRegistration} registration\n     */\n    ControllerInterface.prototype.useServiceWorker = function (registration) {\n        throw this.errorFactory_.create(Errors.codes.AVAILABLE_IN_WINDOW);\n    };\n    /**\n     * @export\n     * @param {!firebase.Observer|function(*)} nextOrObserver\n     * @param {function(!Error)=} optError\n     * @param {function()=} optCompleted\n     * @return {!function()}\n     */\n    ControllerInterface.prototype.onMessage = function (nextOrObserver, optError, optCompleted) {\n        throw this.errorFactory_.create(Errors.codes.AVAILABLE_IN_WINDOW);\n    };\n    /**\n     * @export\n     * @param {!firebase.Observer|function()} nextOrObserver An observer object\n     * or a function triggered on token refresh.\n     * @param {function(!Error)=} optError Optional A function\n     * triggered on token refresh error.\n     * @param {function()=} optCompleted Optional function triggered when the\n     * observer is removed.\n     * @return {!function()} The unsubscribe function for the observer.\n     */\n    ControllerInterface.prototype.onTokenRefresh = function (nextOrObserver, optError, optCompleted) {\n        throw this.errorFactory_.create(Errors.codes.AVAILABLE_IN_WINDOW);\n    };\n    //\n    // The following methods are used by the service worker only.\n    //\n    /**\n     * @export\n     * @param {function(Object)} callback\n     */\n    ControllerInterface.prototype.setBackgroundMessageHandler = function (callback) {\n        throw this.errorFactory_.create(Errors.codes.AVAILABLE_IN_SW);\n    };\n    //\n    // The following methods are used by the service themselves and not exposed\n    // publicly or not expected to be used by developers.\n    //\n    /**\n     * This method is required to adhere to the Firebase interface.\n     * It closes any currently open indexdb database connections.\n     */\n    ControllerInterface.prototype.delete = function () {\n        return this.tokenManager_.closeDatabase();\n    };\n    /**\n     * Returns the current Notification Permission state.\n     * @private\n     * @return {string} The currenct permission state.\n     */\n    ControllerInterface.prototype.getNotificationPermission_ = function () {\n        return Notification.permission;\n    };\n    /**\n     * @protected\n     * @returns {TokenManager}\n     */\n    ControllerInterface.prototype.getTokenManager = function () {\n        return this.tokenManager_;\n    };\n    return ControllerInterface;\n}());\nexport default ControllerInterface;\n\n//# sourceMappingURL=controller-interface.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/messaging/dist/esm/src/controllers/controller-interface.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n// These fields are strings to prevent closure from thinking goog.getMsg\n// should be used to initialise the values\nvar PARAMS = {\n    TYPE_OF_MSG: 'firebase-messaging-msg-type',\n    DATA: 'firebase-messaging-msg-data'\n};\n// This value isn't using the TYPE_OF_MSG short hand as closure\n// expects the variable to be defined via goog.getMsg\nvar msgType = {\n    PUSH_MSG_RECEIVED: 'push-msg-received',\n    NOTIFICATION_CLICKED: 'notification-clicked'\n};\nvar createNewMsg = function (msgType, msgData) {\n    var message = (_a = {},\n        _a[PARAMS.TYPE_OF_MSG] = msgType,\n        _a[PARAMS.DATA] = msgData,\n        _a);\n    return message;\n    var _a;\n};\nexport default {\n    PARAMS: PARAMS,\n    TYPES_OF_MSG: msgType,\n    createNewMsg: createNewMsg\n};\n\n//# sourceMappingURL=worker-page-message.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/messaging/dist/esm/src/models/worker-page-message.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nexport default {\n    path: '/firebase-messaging-sw.js',\n    scope: '/firebase-cloud-messaging-push-scope'\n};\n\n//# sourceMappingURL=default-sw.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/messaging/dist/esm/src/models/default-sw.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ControllerInterface from './controller-interface';\nimport Errors from '../models/errors';\nimport WorkerPageMessage from '../models/worker-page-message';\nimport DefaultSW from '../models/default-sw';\nimport NOTIFICATION_PERMISSION from '../models/notification-permission';\nimport { createSubscribe } from '@firebase/util';\nvar WindowController = /** @class */ (function (_super) {\n    __extends(WindowController, _super);\n    /**\n     * A service that provides a MessagingService instance.\n     * @param {!firebase.app.App} app\n     */\n    function WindowController(app) {\n        var _this = _super.call(this, app) || this;\n        /**\n         * @private\n         * @type {ServiceWorkerRegistration}\n         */\n        _this.registrationToUse_;\n        /**\n         * @private\n         * @type {Promise}\n         */\n        _this.manifestCheckPromise_;\n        /**\n         * @private\n         * @type {firebase.Observer}\n         */\n        _this.messageObserver_ = null;\n        /**\n         * @private {!firebase.Subscribe} The subscribe function to the onMessage\n         * observer.\n         */\n        _this.onMessage_ = createSubscribe(function (observer) {\n            _this.messageObserver_ = observer;\n        });\n        /**\n         * @private\n         * @type {firebase.Observer}\n         */\n        _this.tokenRefreshObserver_ = null;\n        _this.onTokenRefresh_ = createSubscribe(function (observer) {\n            _this.tokenRefreshObserver_ = observer;\n        });\n        _this.setupSWMessageListener_();\n        return _this;\n    }\n    /**\n     * This method returns an FCM token if it can be generated.\n     * The return promise will reject if the browser doesn't support\n     * FCM, if permission is denied for notifications or it's not\n     * possible to generate a token.\n     * @export\n     * @return {Promise<string> | Promise<null>} Returns a promise the\n     * resolves to an FCM token or null if permission isn't granted.\n     */\n    WindowController.prototype.getToken = function () {\n        var _this = this;\n        // Check that the required API's are available\n        if (!this.isSupported_()) {\n            return Promise.reject(this.errorFactory_.create(Errors.codes.UNSUPPORTED_BROWSER));\n        }\n        return this.manifestCheck_().then(function () {\n            return _super.prototype.getToken.call(_this);\n        });\n    };\n    /**\n     * The method checks that a manifest is defined and has the correct GCM\n     * sender ID.\n     * @private\n     * @return {Promise} Returns a promise that resolves if the manifest matches\n     * our required sender ID\n     */\n    WindowController.prototype.manifestCheck_ = function () {\n        var _this = this;\n        if (this.manifestCheckPromise_) {\n            return this.manifestCheckPromise_;\n        }\n        var manifestTag = document.querySelector('link[rel=\"manifest\"]');\n        if (!manifestTag) {\n            this.manifestCheckPromise_ = Promise.resolve();\n        }\n        else {\n            this.manifestCheckPromise_ = fetch(manifestTag.href)\n                .then(function (response) {\n                return response.json();\n            })\n                .catch(function () {\n                // If the download or parsing fails allow check.\n                // We only want to error if we KNOW that the gcm_sender_id is incorrect.\n                return Promise.resolve();\n            })\n                .then(function (manifestContent) {\n                if (!manifestContent) {\n                    return;\n                }\n                if (!manifestContent['gcm_sender_id']) {\n                    return;\n                }\n                if (manifestContent['gcm_sender_id'] !== '103953800507') {\n                    throw _this.errorFactory_.create(Errors.codes.INCORRECT_GCM_SENDER_ID);\n                }\n            });\n        }\n        return this.manifestCheckPromise_;\n    };\n    /**\n     * Request permission if it is not currently granted\n     * @export\n     * @returns {Promise} Resolves if the permission was granted, otherwise\n     * rejects\n     */\n    WindowController.prototype.requestPermission = function () {\n        var _this = this;\n        if (Notification.permission === NOTIFICATION_PERMISSION.granted) {\n            return Promise.resolve();\n        }\n        return new Promise(function (resolve, reject) {\n            var managePermissionResult = function (result) {\n                if (result === NOTIFICATION_PERMISSION.granted) {\n                    return resolve();\n                }\n                else if (result === NOTIFICATION_PERMISSION.denied) {\n                    return reject(_this.errorFactory_.create(Errors.codes.PERMISSION_BLOCKED));\n                }\n                else {\n                    return reject(_this.errorFactory_.create(Errors.codes.PERMISSION_DEFAULT));\n                }\n            };\n            // The Notification.requestPermission API was changed to\n            // return a promise so now have to handle both in case\n            // browsers stop support callbacks for promised version\n            var permissionPromise = Notification.requestPermission(function (result) {\n                if (permissionPromise) {\n                    // Let the promise manage this\n                    return;\n                }\n                managePermissionResult(result);\n            });\n            if (permissionPromise) {\n                // Prefer the promise version as it's the future API.\n                permissionPromise.then(managePermissionResult);\n            }\n        });\n    };\n    /**\n     * This method allows a developer to override the default service worker and\n     * instead use a custom service worker.\n     * @export\n     * @param {!ServiceWorkerRegistration} registration The service worker\n     * registration that should be used to receive the push messages.\n     */\n    WindowController.prototype.useServiceWorker = function (registration) {\n        if (!(registration instanceof ServiceWorkerRegistration)) {\n            throw this.errorFactory_.create(Errors.codes.SW_REGISTRATION_EXPECTED);\n        }\n        if (typeof this.registrationToUse_ !== 'undefined') {\n            throw this.errorFactory_.create(Errors.codes.USE_SW_BEFORE_GET_TOKEN);\n        }\n        this.registrationToUse_ = registration;\n    };\n    /**\n     * @export\n     * @param {!firebase.Observer|function(*)} nextOrObserver An observer object\n     * or a function triggered on message.\n     * @param {function(!Error)=} optError Optional A function triggered on\n     * message error.\n     * @param {function()=} optCompleted Optional function triggered when the\n     * observer is removed.\n     * @return {!function()} The unsubscribe function for the observer.\n     */\n    WindowController.prototype.onMessage = function (nextOrObserver, optError, optCompleted) {\n        return this.onMessage_(nextOrObserver, optError, optCompleted);\n    };\n    /**\n     * @export\n     * @param {!firebase.Observer|function()} nextOrObserver An observer object\n     * or a function triggered on token refresh.\n     * @param {function(!Error)=} optError Optional A function\n     * triggered on token refresh error.\n     * @param {function()=} optCompleted Optional function triggered when the\n     * observer is removed.\n     * @return {!function()} The unsubscribe function for the observer.\n     */\n    WindowController.prototype.onTokenRefresh = function (nextOrObserver, optError, optCompleted) {\n        return this.onTokenRefresh_(nextOrObserver, optError, optCompleted);\n    };\n    /**\n     * Given a registration, wait for the service worker it relates to\n     * become activer\n     * @private\n     * @param  {ServiceWorkerRegistration} registration Registration to wait\n     * for service worker to become active\n     * @return {Promise<!ServiceWorkerRegistration>} Wait for service worker\n     * registration to become active\n     */\n    WindowController.prototype.waitForRegistrationToActivate_ = function (registration) {\n        var _this = this;\n        var serviceWorker = registration.installing || registration.waiting || registration.active;\n        return new Promise(function (resolve, reject) {\n            if (!serviceWorker) {\n                // This is a rare scenario but has occured in firefox\n                reject(_this.errorFactory_.create(Errors.codes.NO_SW_IN_REG));\n                return;\n            }\n            // Because the Promise function is called on next tick there is a\n            // small chance that the worker became active or redundant already.\n            if (serviceWorker.state === 'activated') {\n                resolve(registration);\n                return;\n            }\n            if (serviceWorker.state === 'redundant') {\n                reject(_this.errorFactory_.create(Errors.codes.SW_REG_REDUNDANT));\n                return;\n            }\n            var stateChangeListener = function () {\n                if (serviceWorker.state === 'activated') {\n                    resolve(registration);\n                }\n                else if (serviceWorker.state === 'redundant') {\n                    reject(_this.errorFactory_.create(Errors.codes.SW_REG_REDUNDANT));\n                }\n                else {\n                    // Return early and wait to next state change\n                    return;\n                }\n                serviceWorker.removeEventListener('statechange', stateChangeListener);\n            };\n            serviceWorker.addEventListener('statechange', stateChangeListener);\n        });\n    };\n    /**\n     * This will regiater the default service worker and return the registration\n     * @private\n     * @return {Promise<!ServiceWorkerRegistration>} The service worker\n     * registration to be used for the push service.\n     */\n    WindowController.prototype.getSWRegistration_ = function () {\n        var _this = this;\n        if (this.registrationToUse_) {\n            return this.waitForRegistrationToActivate_(this.registrationToUse_);\n        }\n        // Make the registration null so we know useServiceWorker will not\n        // use a new service worker as registrationToUse_ is no longer undefined\n        this.registrationToUse_ = null;\n        return navigator.serviceWorker\n            .register(DefaultSW.path, {\n            scope: DefaultSW.scope\n        })\n            .catch(function (err) {\n            throw _this.errorFactory_.create(Errors.codes.FAILED_DEFAULT_REGISTRATION, {\n                browserErrorMessage: err.message\n            });\n        })\n            .then(function (registration) {\n            return _this.waitForRegistrationToActivate_(registration).then(function () {\n                _this.registrationToUse_ = registration;\n                // We update after activation due to an issue with Firefox v49 where\n                // a race condition occassionally causes the service work to not\n                // install\n                registration.update();\n                return registration;\n            });\n        });\n    };\n    /**\n     * This method will set up a message listener to handle\n     * events from the service worker that should trigger\n     * events in the page.\n     *\n     * @private\n     */\n    WindowController.prototype.setupSWMessageListener_ = function () {\n        var _this = this;\n        if (!('serviceWorker' in navigator)) {\n            return;\n        }\n        navigator.serviceWorker.addEventListener('message', function (event) {\n            if (!event.data || !event.data[WorkerPageMessage.PARAMS.TYPE_OF_MSG]) {\n                // Not a message from FCM\n                return;\n            }\n            var workerPageMessage = event.data;\n            switch (workerPageMessage[WorkerPageMessage.PARAMS.TYPE_OF_MSG]) {\n                case WorkerPageMessage.TYPES_OF_MSG.PUSH_MSG_RECEIVED:\n                case WorkerPageMessage.TYPES_OF_MSG.NOTIFICATION_CLICKED:\n                    var pushMessage = workerPageMessage[WorkerPageMessage.PARAMS.DATA];\n                    _this.messageObserver_.next(pushMessage);\n                    break;\n                default:\n                    // Noop.\n                    break;\n            }\n        }, false);\n    };\n    /**\n     * Checks to see if the required API's are valid or not.\n     * @private\n     * @return {boolean} Returns true if the desired APIs are available.\n     */\n    WindowController.prototype.isSupported_ = function () {\n        return ('serviceWorker' in navigator &&\n            'PushManager' in window &&\n            'Notification' in window &&\n            'fetch' in window &&\n            ServiceWorkerRegistration.prototype.hasOwnProperty('showNotification') &&\n            PushSubscription.prototype.hasOwnProperty('getKey'));\n    };\n    return WindowController;\n}(ControllerInterface));\nexport default WindowController;\n\n//# sourceMappingURL=window-controller.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/messaging/dist/esm/src/controllers/window-controller.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ControllerInterface from './controller-interface';\nimport Errors from '../models/errors';\nimport WorkerPageMessage from '../models/worker-page-message';\nimport FCMDetails from '../models/fcm-details';\nvar FCM_MSG = 'FCM_MSG';\nvar SWController = /** @class */ (function (_super) {\n    __extends(SWController, _super);\n    function SWController(app) {\n        var _this = _super.call(this, app) || this;\n        self.addEventListener('push', function (e) { return _this.onPush_(e); }, false);\n        self.addEventListener('pushsubscriptionchange', function (e) { return _this.onSubChange_(e); }, false);\n        self.addEventListener('notificationclick', function (e) { return _this.onNotificationClick_(e); }, false);\n        /**\n         * @private\n         * @type {function(Object)|null}\n         */\n        _this.bgMessageHandler_ = null;\n        return _this;\n    }\n    /**\n    * A handler for push events that shows notifications based on the content of\n    * the payload.\n    *\n    * The payload must be a JSON-encoded Object with a `notification` key. The\n    * value of the `notification` property will be used as the NotificationOptions\n    * object passed to showNotification. Additionally, the `title` property of the\n    * notification object will be used as the title.\n    *\n    * If there is no notification data in the payload then no notification will be\n    * shown.\n    * @private\n    */\n    SWController.prototype.onPush_ = function (event) {\n        var _this = this;\n        var msgPayload;\n        try {\n            msgPayload = event.data.json();\n        }\n        catch (err) {\n            // Not JSON so not an FCM message\n            return;\n        }\n        var handleMsgPromise = this.hasVisibleClients_().then(function (hasVisibleClients) {\n            if (hasVisibleClients) {\n                // Do not need to show a notification.\n                if (msgPayload.notification || _this.bgMessageHandler_) {\n                    // Send to page\n                    return _this.sendMessageToWindowClients_(msgPayload);\n                }\n                return;\n            }\n            var notificationDetails = _this.getNotificationData_(msgPayload);\n            if (notificationDetails) {\n                var notificationTitle = notificationDetails.title || '';\n                return self.registration.showNotification(notificationTitle, notificationDetails);\n            }\n            else if (_this.bgMessageHandler_) {\n                return _this.bgMessageHandler_(msgPayload);\n            }\n        });\n        event.waitUntil(handleMsgPromise);\n    };\n    /**\n    * @private\n    */\n    SWController.prototype.onSubChange_ = function (event) {\n        var _this = this;\n        var promiseChain = this.getToken().then(function (token) {\n            if (!token) {\n                // We can't resubscribe if we don't have an FCM token for this scope.\n                throw _this.errorFactory_.create(Errors.codes.NO_FCM_TOKEN_FOR_RESUBSCRIBE);\n            }\n            var tokenDetails = null;\n            var tokenManager = _this.getTokenManager();\n            return tokenManager\n                .getTokenDetailsFromToken(token)\n                .then(function (details) {\n                tokenDetails = details;\n                if (!tokenDetails) {\n                    throw _this.errorFactory_.create(Errors.codes.INVALID_SAVED_TOKEN);\n                }\n                // Attempt to get a new subscription\n                return self.registration.pushManager.subscribe(FCMDetails.SUBSCRIPTION_OPTIONS);\n            })\n                .then(function (newSubscription) {\n                // Send new subscription to FCM.\n                return tokenManager.subscribeToFCM(tokenDetails.fcmSenderId, newSubscription, tokenDetails.fcmPushSet);\n            })\n                .catch(function (err) {\n                // The best thing we can do is log this to the terminal so\n                // developers might notice the error.\n                return tokenManager.deleteToken(tokenDetails.fcmToken).then(function () {\n                    throw _this.errorFactory_.create(Errors.codes.UNABLE_TO_RESUBSCRIBE, {\n                        message: err\n                    });\n                });\n            });\n        });\n        event.waitUntil(promiseChain);\n    };\n    /**\n    * @private\n    */\n    SWController.prototype.onNotificationClick_ = function (event) {\n        var _this = this;\n        if (!(event.notification &&\n            event.notification.data &&\n            event.notification.data[FCM_MSG])) {\n            // Not an FCM notification, do nothing.\n            return;\n        }\n        // Prevent other listeners from receiving the event\n        event.stopImmediatePropagation();\n        event.notification.close();\n        var msgPayload = event.notification.data[FCM_MSG];\n        var clickAction = msgPayload['notification']['click_action'];\n        if (!clickAction) {\n            // Nothing to do.\n            return;\n        }\n        var promiseChain = this.getWindowClient_(clickAction)\n            .then(function (windowClient) {\n            if (!windowClient) {\n                // Unable to find window client so need to open one.\n                return self.clients.openWindow(clickAction);\n            }\n            return windowClient;\n        })\n            .then(function (windowClient) {\n            if (!windowClient) {\n                // Window Client will not be returned if it's for a third party origin.\n                return;\n            }\n            // Delete notification data from payload before sending to the page.\n            var notificationData = msgPayload['notification'];\n            delete msgPayload['notification'];\n            var internalMsg = WorkerPageMessage.createNewMsg(WorkerPageMessage.TYPES_OF_MSG.NOTIFICATION_CLICKED, msgPayload);\n            // Attempt to send a message to the client to handle the data\n            // Is affected by: https://github.com/slightlyoff/ServiceWorker/issues/728\n            return _this.attemptToMessageClient_(windowClient, internalMsg);\n        });\n        event.waitUntil(promiseChain);\n    };\n    /**\n     * @private\n     * @param {Object} msgPayload\n     * @return {NotificationOptions|undefined}\n     */\n    SWController.prototype.getNotificationData_ = function (msgPayload) {\n        if (!msgPayload) {\n            return;\n        }\n        if (typeof msgPayload.notification !== 'object') {\n            return;\n        }\n        var notificationInformation = Object.assign({}, msgPayload.notification);\n        // Put the message payload under FCM_MSG name so we can identify the\n        // notification as being an FCM notification vs a notification from\n        // somewhere else (i.e. normal web push or developer generated\n        // notification).\n        notificationInformation['data'] = (_a = {},\n            _a[FCM_MSG] = msgPayload,\n            _a);\n        return notificationInformation;\n        var _a;\n    };\n    /**\n     * Calling setBackgroundMessageHandler will opt in to some specific\n     * behaviours.\n     * 1.) If a notification doesn't need to be shown due to a window already\n     * being visible, then push messages will be sent to the page.\n     * 2.) If a notification needs to be shown, and the message contains no\n     * notification data this method will be called\n     * and the promise it returns will be passed to event.waitUntil.\n     * If you do not set this callback then all push messages will let and the\n     * developer can handle them in a their own 'push' event callback\n     * @export\n     * @param {function(Object)} callback The callback to be called when a push\n     * message is received and a notification must be shown. The callback will\n     * be given the data from the push message.\n     */\n    SWController.prototype.setBackgroundMessageHandler = function (callback) {\n        if (callback && typeof callback !== 'function') {\n            throw this.errorFactory_.create(Errors.codes.BG_HANDLER_FUNCTION_EXPECTED);\n        }\n        this.bgMessageHandler_ = callback;\n    };\n    /**\n     * @private\n     * @param {string} url The URL to look for when focusing a client.\n     * @return {Object} Returns an existing window client or a newly opened\n     * WindowClient.\n     */\n    SWController.prototype.getWindowClient_ = function (url) {\n        // Use URL to normalize the URL when comparing to windowClients.\n        // This at least handles whether to include trailing slashes or not\n        var parsedURL = new URL(url).href;\n        return self.clients\n            .matchAll({\n            type: 'window',\n            includeUncontrolled: true\n        })\n            .then(function (clientList) {\n            var suitableClient = null;\n            for (var i = 0; i < clientList.length; i++) {\n                var parsedClientUrl = new URL(clientList[i].url).href;\n                if (parsedClientUrl === parsedURL) {\n                    suitableClient = clientList[i];\n                    break;\n                }\n            }\n            if (suitableClient) {\n                suitableClient.focus();\n                return suitableClient;\n            }\n        });\n    };\n    /**\n     * This message will attempt to send the message to a window client.\n     * @private\n     * @param {Object} client The WindowClient to send the message to.\n     * @param {Object} message The message to send to the client.\n     * @returns {Promise} Returns a promise that resolves after sending the\n     * message. This does not guarantee that the message was successfully\n     * received.\n     */\n    SWController.prototype.attemptToMessageClient_ = function (client, message) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (!client) {\n                return reject(_this.errorFactory_.create(Errors.codes.NO_WINDOW_CLIENT_TO_MSG));\n            }\n            client.postMessage(message);\n            resolve();\n        });\n    };\n    /**\n     * @private\n     * @returns {Promise<boolean>} If there is currently a visible WindowClient,\n     * this method will resolve to true, otherwise false.\n     */\n    SWController.prototype.hasVisibleClients_ = function () {\n        return self.clients\n            .matchAll({\n            type: 'window',\n            includeUncontrolled: true\n        })\n            .then(function (clientList) {\n            return clientList.some(function (client) { return client.visibilityState === 'visible'; });\n        });\n    };\n    /**\n     * @private\n     * @param {Object} msgPayload The data from the push event that should be sent\n     * to all available pages.\n     * @returns {Promise} Returns a promise that resolves once the message\n     * has been sent to all WindowClients.\n     */\n    SWController.prototype.sendMessageToWindowClients_ = function (msgPayload) {\n        var _this = this;\n        return self.clients\n            .matchAll({\n            type: 'window',\n            includeUncontrolled: true\n        })\n            .then(function (clientList) {\n            var internalMsg = WorkerPageMessage.createNewMsg(WorkerPageMessage.TYPES_OF_MSG.PUSH_MSG_RECEIVED, msgPayload);\n            return Promise.all(clientList.map(function (client) {\n                return _this.attemptToMessageClient_(client, internalMsg);\n            }));\n        });\n    };\n    /**\n     * This will register the default service worker and return the registration.\n     * @private\n     * @return {Promise<!ServiceWorkerRegistration>} The service worker\n     * registration to be used for the push service.\n     */\n    SWController.prototype.getSWRegistration_ = function () {\n        return Promise.resolve(self.registration);\n    };\n    return SWController;\n}(ControllerInterface));\nexport default SWController;\n\n//# sourceMappingURL=sw-controller.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/messaging/dist/esm/src/controllers/sw-controller.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nrequire('@firebase/storage');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/firebase/storage/index.js\n// module id = 468\n// module chunks = 1","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { configOption } from './constants';\nvar FirebaseStorageError = /** @class */ (function () {\n    function FirebaseStorageError(code, message) {\n        this.code_ = prependCode(code);\n        this.message_ = 'Firebase Storage: ' + message;\n        this.serverResponse_ = null;\n        this.name_ = 'FirebaseError';\n    }\n    FirebaseStorageError.prototype.codeProp = function () {\n        return this.code;\n    };\n    FirebaseStorageError.prototype.codeEquals = function (code) {\n        return prependCode(code) === this.codeProp();\n    };\n    FirebaseStorageError.prototype.serverResponseProp = function () {\n        return this.serverResponse_;\n    };\n    FirebaseStorageError.prototype.setServerResponseProp = function (serverResponse) {\n        this.serverResponse_ = serverResponse;\n    };\n    Object.defineProperty(FirebaseStorageError.prototype, \"name\", {\n        get: function () {\n            return this.name_;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FirebaseStorageError.prototype, \"code\", {\n        get: function () {\n            return this.code_;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FirebaseStorageError.prototype, \"message\", {\n        get: function () {\n            return this.message_;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FirebaseStorageError.prototype, \"serverResponse\", {\n        get: function () {\n            return this.serverResponse_;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return FirebaseStorageError;\n}());\nexport { FirebaseStorageError };\nexport var errors = {};\nexport var Code = {\n    // Shared between all platforms\n    UNKNOWN: 'unknown',\n    OBJECT_NOT_FOUND: 'object-not-found',\n    BUCKET_NOT_FOUND: 'bucket-not-found',\n    PROJECT_NOT_FOUND: 'project-not-found',\n    QUOTA_EXCEEDED: 'quota-exceeded',\n    UNAUTHENTICATED: 'unauthenticated',\n    UNAUTHORIZED: 'unauthorized',\n    RETRY_LIMIT_EXCEEDED: 'retry-limit-exceeded',\n    INVALID_CHECKSUM: 'invalid-checksum',\n    CANCELED: 'canceled',\n    // JS specific\n    INVALID_EVENT_NAME: 'invalid-event-name',\n    INVALID_URL: 'invalid-url',\n    INVALID_DEFAULT_BUCKET: 'invalid-default-bucket',\n    NO_DEFAULT_BUCKET: 'no-default-bucket',\n    CANNOT_SLICE_BLOB: 'cannot-slice-blob',\n    SERVER_FILE_WRONG_SIZE: 'server-file-wrong-size',\n    NO_DOWNLOAD_URL: 'no-download-url',\n    INVALID_ARGUMENT: 'invalid-argument',\n    INVALID_ARGUMENT_COUNT: 'invalid-argument-count',\n    APP_DELETED: 'app-deleted',\n    INVALID_ROOT_OPERATION: 'invalid-root-operation',\n    INVALID_FORMAT: 'invalid-format',\n    INTERNAL_ERROR: 'internal-error'\n};\nexport function prependCode(code) {\n    return 'storage/' + code;\n}\nexport function unknown() {\n    var message = 'An unknown error occurred, please check the error payload for ' +\n        'server response.';\n    return new FirebaseStorageError(Code.UNKNOWN, message);\n}\nexport function objectNotFound(path) {\n    return new FirebaseStorageError(Code.OBJECT_NOT_FOUND, \"Object '\" + path + \"' does not exist.\");\n}\nexport function bucketNotFound(bucket) {\n    return new FirebaseStorageError(Code.BUCKET_NOT_FOUND, \"Bucket '\" + bucket + \"' does not exist.\");\n}\nexport function projectNotFound(project) {\n    return new FirebaseStorageError(Code.PROJECT_NOT_FOUND, \"Project '\" + project + \"' does not exist.\");\n}\nexport function quotaExceeded(bucket) {\n    return new FirebaseStorageError(Code.QUOTA_EXCEEDED, \"Quota for bucket '\" +\n        bucket +\n        \"' exceeded, please view quota on \" +\n        'https://firebase.google.com/pricing/.');\n}\nexport function unauthenticated() {\n    var message = 'User is not authenticated, please authenticate using Firebase ' +\n        'Authentication and try again.';\n    return new FirebaseStorageError(Code.UNAUTHENTICATED, message);\n}\nexport function unauthorized(path) {\n    return new FirebaseStorageError(Code.UNAUTHORIZED, \"User does not have permission to access '\" + path + \"'.\");\n}\nexport function retryLimitExceeded() {\n    return new FirebaseStorageError(Code.RETRY_LIMIT_EXCEEDED, 'Max retry time for operation exceeded, please try again.');\n}\nexport function invalidChecksum(path, checksum, calculated) {\n    return new FirebaseStorageError(Code.INVALID_CHECKSUM, \"Uploaded/downloaded object '\" +\n        path +\n        \"' has checksum '\" +\n        checksum +\n        \"' which does not match '\" +\n        calculated +\n        \"'. Please retry the upload/download.\");\n}\nexport function canceled() {\n    return new FirebaseStorageError(Code.CANCELED, 'User canceled the upload/download.');\n}\nexport function invalidEventName(name) {\n    return new FirebaseStorageError(Code.INVALID_EVENT_NAME, \"Invalid event name '\" + name + \"'.\");\n}\nexport function invalidUrl(url) {\n    return new FirebaseStorageError(Code.INVALID_URL, \"Invalid URL '\" + url + \"'.\");\n}\nexport function invalidDefaultBucket(bucket) {\n    return new FirebaseStorageError(Code.INVALID_DEFAULT_BUCKET, \"Invalid default bucket '\" + bucket + \"'.\");\n}\nexport function noDefaultBucket() {\n    return new FirebaseStorageError(Code.NO_DEFAULT_BUCKET, 'No default bucket ' +\n        \"found. Did you set the '\" +\n        configOption +\n        \"' property when initializing the app?\");\n}\nexport function cannotSliceBlob() {\n    return new FirebaseStorageError(Code.CANNOT_SLICE_BLOB, 'Cannot slice blob for upload. Please retry the upload.');\n}\nexport function serverFileWrongSize() {\n    return new FirebaseStorageError(Code.SERVER_FILE_WRONG_SIZE, 'Server recorded incorrect upload file size, please retry the upload.');\n}\nexport function noDownloadURL() {\n    return new FirebaseStorageError(Code.NO_DOWNLOAD_URL, 'The given file does not have any download URLs.');\n}\nexport function invalidArgument(index, fnName, message) {\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT, 'Invalid argument in `' + fnName + '` at index ' + index + ': ' + message);\n}\nexport function invalidArgumentCount(argMin, argMax, fnName, real) {\n    var countPart;\n    var plural;\n    if (argMin === argMax) {\n        countPart = argMin;\n        plural = argMin === 1 ? 'argument' : 'arguments';\n    }\n    else {\n        countPart = 'between ' + argMin + ' and ' + argMax;\n        plural = 'arguments';\n    }\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT_COUNT, 'Invalid argument count in `' +\n        fnName +\n        '`: Expected ' +\n        countPart +\n        ' ' +\n        plural +\n        ', received ' +\n        real +\n        '.');\n}\nexport function appDeleted() {\n    return new FirebaseStorageError(Code.APP_DELETED, 'The Firebase app was deleted.');\n}\n/**\n * @param name The name of the operation that was invalid.\n */\nexport function invalidRootOperation(name) {\n    return new FirebaseStorageError(Code.INVALID_ROOT_OPERATION, \"The operation '\" +\n        name +\n        \"' cannot be performed on a root reference, create a non-root \" +\n        \"reference using child, such as .child('file.png').\");\n}\n/**\n * @param format The format that was not valid.\n * @param message A message describing the format violation.\n */\nexport function invalidFormat(format, message) {\n    return new FirebaseStorageError(Code.INVALID_FORMAT, \"String does not match format '\" + format + \"': \" + message);\n}\n/**\n * @param message A message describing the internal error.\n */\nexport function internalError(message) {\n    throw new FirebaseStorageError(Code.INTERNAL_ERROR, 'Internal error: ' + message);\n}\n\n//# sourceMappingURL=error.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/error.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as errorsExports from './error';\nexport var StringFormat = {\n    RAW: 'raw',\n    BASE64: 'base64',\n    BASE64URL: 'base64url',\n    DATA_URL: 'data_url'\n};\nexport function formatValidator(stringFormat) {\n    switch (stringFormat) {\n        case StringFormat.RAW:\n        case StringFormat.BASE64:\n        case StringFormat.BASE64URL:\n        case StringFormat.DATA_URL:\n            return;\n        default:\n            throw 'Expected one of the event types: [' +\n                StringFormat.RAW +\n                ', ' +\n                StringFormat.BASE64 +\n                ', ' +\n                StringFormat.BASE64URL +\n                ', ' +\n                StringFormat.DATA_URL +\n                '].';\n    }\n}\n/**\n * @struct\n */\nvar StringData = /** @class */ (function () {\n    function StringData(data, opt_contentType) {\n        this.data = data;\n        this.contentType = opt_contentType || null;\n    }\n    return StringData;\n}());\nexport { StringData };\nexport function dataFromString(format, string) {\n    switch (format) {\n        case StringFormat.RAW:\n            return new StringData(utf8Bytes_(string));\n        case StringFormat.BASE64:\n        case StringFormat.BASE64URL:\n            return new StringData(base64Bytes_(format, string));\n        case StringFormat.DATA_URL:\n            return new StringData(dataURLBytes_(string), dataURLContentType_(string));\n    }\n    // assert(false);\n    throw errorsExports.unknown();\n}\nexport function utf8Bytes_(string) {\n    var b = [];\n    for (var i = 0; i < string.length; i++) {\n        var c = string.charCodeAt(i);\n        if (c <= 127) {\n            b.push(c);\n        }\n        else {\n            if (c <= 2047) {\n                b.push(192 | (c >> 6), 128 | (c & 63));\n            }\n            else {\n                if ((c & 64512) == 55296) {\n                    // The start of a surrogate pair.\n                    var valid = i < string.length - 1 &&\n                        (string.charCodeAt(i + 1) & 64512) == 56320;\n                    if (!valid) {\n                        // The second surrogate wasn't there.\n                        b.push(239, 191, 189);\n                    }\n                    else {\n                        var hi = c;\n                        var lo = string.charCodeAt(++i);\n                        c = 65536 | ((hi & 1023) << 10) | (lo & 1023);\n                        b.push(240 | (c >> 18), 128 | ((c >> 12) & 63), 128 | ((c >> 6) & 63), 128 | (c & 63));\n                    }\n                }\n                else {\n                    if ((c & 64512) == 56320) {\n                        // Invalid low surrogate.\n                        b.push(239, 191, 189);\n                    }\n                    else {\n                        b.push(224 | (c >> 12), 128 | ((c >> 6) & 63), 128 | (c & 63));\n                    }\n                }\n            }\n        }\n    }\n    return new Uint8Array(b);\n}\nexport function percentEncodedBytes_(string) {\n    var decoded;\n    try {\n        decoded = decodeURIComponent(string);\n    }\n    catch (e) {\n        throw errorsExports.invalidFormat(StringFormat.DATA_URL, 'Malformed data URL.');\n    }\n    return utf8Bytes_(decoded);\n}\nexport function base64Bytes_(format, string) {\n    switch (format) {\n        case StringFormat.BASE64: {\n            var hasMinus = string.indexOf('-') !== -1;\n            var hasUnder = string.indexOf('_') !== -1;\n            if (hasMinus || hasUnder) {\n                var invalidChar = hasMinus ? '-' : '_';\n                throw errorsExports.invalidFormat(format, \"Invalid character '\" +\n                    invalidChar +\n                    \"' found: is it base64url encoded?\");\n            }\n            break;\n        }\n        case StringFormat.BASE64URL: {\n            var hasPlus = string.indexOf('+') !== -1;\n            var hasSlash = string.indexOf('/') !== -1;\n            if (hasPlus || hasSlash) {\n                var invalidChar = hasPlus ? '+' : '/';\n                throw errorsExports.invalidFormat(format, \"Invalid character '\" + invalidChar + \"' found: is it base64 encoded?\");\n            }\n            string = string.replace(/-/g, '+').replace(/_/g, '/');\n            break;\n        }\n    }\n    var bytes;\n    try {\n        bytes = atob(string);\n    }\n    catch (e) {\n        throw errorsExports.invalidFormat(format, 'Invalid character found');\n    }\n    var array = new Uint8Array(bytes.length);\n    for (var i = 0; i < bytes.length; i++) {\n        array[i] = bytes.charCodeAt(i);\n    }\n    return array;\n}\n/**\n * @struct\n */\nvar DataURLParts = /** @class */ (function () {\n    function DataURLParts(dataURL) {\n        this.base64 = false;\n        this.contentType = null;\n        var matches = dataURL.match(/^data:([^,]+)?,/);\n        if (matches === null) {\n            throw errorsExports.invalidFormat(StringFormat.DATA_URL, \"Must be formatted 'data:[<mediatype>][;base64],<data>\");\n        }\n        var middle = matches[1] || null;\n        if (middle != null) {\n            this.base64 = endsWith(middle, ';base64');\n            this.contentType = this.base64\n                ? middle.substring(0, middle.length - ';base64'.length)\n                : middle;\n        }\n        this.rest = dataURL.substring(dataURL.indexOf(',') + 1);\n    }\n    return DataURLParts;\n}());\nexport function dataURLBytes_(string) {\n    var parts = new DataURLParts(string);\n    if (parts.base64) {\n        return base64Bytes_(StringFormat.BASE64, parts.rest);\n    }\n    else {\n        return percentEncodedBytes_(parts.rest);\n    }\n}\nexport function dataURLContentType_(string) {\n    var parts = new DataURLParts(string);\n    return parts.contentType;\n}\nfunction endsWith(s, end) {\n    var longEnough = s.length >= end.length;\n    if (!longEnough) {\n        return false;\n    }\n    return s.substring(s.length - end.length) === end;\n}\n\n//# sourceMappingURL=string.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/string.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var TaskEvent = {\n    /** Triggered whenever the task changes or progress is updated. */\n    STATE_CHANGED: 'state_changed'\n};\nexport var InternalTaskState = {\n    RUNNING: 'running',\n    PAUSING: 'pausing',\n    PAUSED: 'paused',\n    SUCCESS: 'success',\n    CANCELING: 'canceling',\n    CANCELED: 'canceled',\n    ERROR: 'error'\n};\nexport var TaskState = {\n    /** The task is currently transferring data. */\n    RUNNING: 'running',\n    /** The task was paused by the user. */\n    PAUSED: 'paused',\n    /** The task completed successfully. */\n    SUCCESS: 'success',\n    /** The task was canceled. */\n    CANCELED: 'canceled',\n    /** The task failed with an error. */\n    ERROR: 'error'\n};\nexport function taskStateFromInternalTaskState(state) {\n    switch (state) {\n        case InternalTaskState.RUNNING:\n        case InternalTaskState.PAUSING:\n        case InternalTaskState.CANCELING:\n            return TaskState.RUNNING;\n        case InternalTaskState.PAUSED:\n            return TaskState.PAUSED;\n        case InternalTaskState.SUCCESS:\n            return TaskState.SUCCESS;\n        case InternalTaskState.CANCELED:\n            return TaskState.CANCELED;\n        case InternalTaskState.ERROR:\n            return TaskState.ERROR;\n        default:\n            // TODO(andysoto): assert(false);\n            return TaskState.ERROR;\n    }\n}\n\n//# sourceMappingURL=taskenums.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/taskenums.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Contains methods for working with objects.\n */\nexport function contains(obj, prop) {\n    return Object.prototype.hasOwnProperty.call(obj, prop);\n}\nexport function forEach(obj, f) {\n    for (var key in obj) {\n        if (contains(obj, key)) {\n            f(key, obj[key]);\n        }\n    }\n}\nexport function clone(obj) {\n    if (obj == null) {\n        return {};\n    }\n    var c = {};\n    forEach(obj, function (key, val) {\n        c[key] = val;\n    });\n    return c;\n}\n\n//# sourceMappingURL=object.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/object.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Implements the promise abstraction interface for external\n * (public SDK) packaging, which just passes through to the firebase-app impl.\n */\n/**\n * @template T\n * @param {function((function(T): void),\n *                  (function(!Error): void))} resolver\n */\nexport function make(resolver) {\n    return new Promise(resolver);\n}\n/**\n * @template T\n */\nexport function resolve(value) {\n    return Promise.resolve(value);\n}\nexport function reject(error) {\n    return Promise.reject(error);\n}\n\n//# sourceMappingURL=promise_external.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/promise_external.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @return False if the object is undefined or null, true otherwise.\n */\nexport function isDef(p) {\n    return p != null;\n}\nexport function isJustDef(p) {\n    return p !== void 0;\n}\nexport function isFunction(p) {\n    return typeof p === 'function';\n}\nexport function isObject(p) {\n    return typeof p === 'object';\n}\nexport function isNonNullObject(p) {\n    return isObject(p) && p !== null;\n}\nexport function isNonArrayObject(p) {\n    return isObject(p) && !Array.isArray(p);\n}\nexport function isString(p) {\n    return typeof p === 'string' || p instanceof String;\n}\nexport function isNumber(p) {\n    return typeof p === 'number' || p instanceof Number;\n}\nexport function isNativeBlob(p) {\n    return isNativeBlobDefined() && p instanceof Blob;\n}\nexport function isNativeBlobDefined() {\n    return typeof Blob !== 'undefined';\n}\n\n//# sourceMappingURL=type.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/type.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as type from './type';\n/**\n * Returns the Object resulting from parsing the given JSON, or null if the\n * given string does not represent a JSON object.\n */\nexport function jsonObjectOrNull(s) {\n    var obj;\n    try {\n        obj = JSON.parse(s);\n    }\n    catch (e) {\n        return null;\n    }\n    if (type.isNonArrayObject(obj)) {\n        return obj;\n    }\n    else {\n        return null;\n    }\n}\n\n//# sourceMappingURL=json.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/json.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Contains helper methods for manipulating paths.\n */\n/**\n * @return Null if the path is already at the root.\n */\nexport function parent(path) {\n    if (path.length == 0) {\n        return null;\n    }\n    var index = path.lastIndexOf('/');\n    if (index === -1) {\n        return '';\n    }\n    var newPath = path.slice(0, index);\n    return newPath;\n}\nexport function child(path, childPath) {\n    var canonicalChildPath = childPath\n        .split('/')\n        .filter(function (component) {\n        return component.length > 0;\n    })\n        .join('/');\n    if (path.length === 0) {\n        return canonicalChildPath;\n    }\n    else {\n        return path + '/' + canonicalChildPath;\n    }\n}\n/**\n * Returns the last component of a path.\n * '/foo/bar' -> 'bar'\n * '/foo/bar/baz/' -> 'baz/'\n * '/a' -> 'a'\n */\nexport function lastComponent(path) {\n    var index = path.lastIndexOf('/', path.length - 2);\n    if (index === -1) {\n        return path;\n    }\n    else {\n        return path.slice(index + 1);\n    }\n}\n\n//# sourceMappingURL=path.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/path.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Functions to create and manipulate URLs for the server API.\n */\nimport * as constants from './constants';\nimport * as object from './object';\nexport function makeNormalUrl(urlPart) {\n    return constants.domainBase + constants.apiBaseUrl + urlPart;\n}\nexport function makeDownloadUrl(urlPart) {\n    return constants.downloadBase + constants.apiBaseUrl + urlPart;\n}\nexport function makeUploadUrl(urlPart) {\n    return constants.domainBase + constants.apiUploadBaseUrl + urlPart;\n}\nexport function makeQueryString(params) {\n    var encode = encodeURIComponent;\n    var queryPart = '?';\n    object.forEach(params, function (key, val) {\n        var nextPart = encode(key) + '=' + encode(val);\n        queryPart = queryPart + nextPart + '&';\n    });\n    // Chop off the extra '&' or '?' on the end\n    queryPart = queryPart.slice(0, -1);\n    return queryPart;\n}\n\n//# sourceMappingURL=url.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/url.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as json from './json';\nimport { Location } from './location';\nimport * as path from './path';\nimport * as type from './type';\nimport * as UrlUtils from './url';\nexport function noXform_(metadata, value) {\n    return value;\n}\n/**\n * @struct\n */\nvar Mapping = /** @class */ (function () {\n    function Mapping(server, opt_local, opt_writable, opt_xform) {\n        this.server = server;\n        this.local = opt_local || server;\n        this.writable = !!opt_writable;\n        this.xform = opt_xform || noXform_;\n    }\n    return Mapping;\n}());\nexport { Mapping };\nvar mappings_ = null;\nexport function xformPath(fullPath) {\n    var valid = type.isString(fullPath);\n    if (!valid || fullPath.length < 2) {\n        return fullPath;\n    }\n    else {\n        fullPath = fullPath;\n        return path.lastComponent(fullPath);\n    }\n}\nexport function getMappings() {\n    if (mappings_) {\n        return mappings_;\n    }\n    var mappings = [];\n    mappings.push(new Mapping('bucket'));\n    mappings.push(new Mapping('generation'));\n    mappings.push(new Mapping('metageneration'));\n    mappings.push(new Mapping('name', 'fullPath', true));\n    function mappingsXformPath(metadata, fullPath) {\n        return xformPath(fullPath);\n    }\n    var nameMapping = new Mapping('name');\n    nameMapping.xform = mappingsXformPath;\n    mappings.push(nameMapping);\n    /**\n     * Coerces the second param to a number, if it is defined.\n     */\n    function xformSize(metadata, size) {\n        if (type.isDef(size)) {\n            return +size;\n        }\n        else {\n            return size;\n        }\n    }\n    var sizeMapping = new Mapping('size');\n    sizeMapping.xform = xformSize;\n    mappings.push(sizeMapping);\n    mappings.push(new Mapping('timeCreated'));\n    mappings.push(new Mapping('updated'));\n    mappings.push(new Mapping('md5Hash', null, true));\n    mappings.push(new Mapping('cacheControl', null, true));\n    mappings.push(new Mapping('contentDisposition', null, true));\n    mappings.push(new Mapping('contentEncoding', null, true));\n    mappings.push(new Mapping('contentLanguage', null, true));\n    mappings.push(new Mapping('contentType', null, true));\n    mappings.push(new Mapping('metadata', 'customMetadata', true));\n    /**\n     * Transforms a comma-separated string of tokens into a list of download\n     * URLs.\n     */\n    function xformTokens(metadata, tokens) {\n        var valid = type.isString(tokens) && tokens.length > 0;\n        if (!valid) {\n            // This can happen if objects are uploaded through GCS and retrieved\n            // through list, so we don't want to throw an Error.\n            return [];\n        }\n        var encode = encodeURIComponent;\n        var tokensList = tokens.split(',');\n        var urls = tokensList.map(function (token) {\n            var bucket = metadata['bucket'];\n            var path = metadata['fullPath'];\n            var urlPart = '/b/' + encode(bucket) + '/o/' + encode(path);\n            var base = UrlUtils.makeDownloadUrl(urlPart);\n            var queryString = UrlUtils.makeQueryString({\n                alt: 'media',\n                token: token\n            });\n            return base + queryString;\n        });\n        return urls;\n    }\n    mappings.push(new Mapping('downloadTokens', 'downloadURLs', false, xformTokens));\n    mappings_ = mappings;\n    return mappings_;\n}\nexport function addRef(metadata, authWrapper) {\n    function generateRef() {\n        var bucket = metadata['bucket'];\n        var path = metadata['fullPath'];\n        var loc = new Location(bucket, path);\n        return authWrapper.makeStorageReference(loc);\n    }\n    Object.defineProperty(metadata, 'ref', { get: generateRef });\n}\nexport function fromResource(authWrapper, resource, mappings) {\n    var metadata = {};\n    metadata['type'] = 'file';\n    var len = mappings.length;\n    for (var i = 0; i < len; i++) {\n        var mapping = mappings[i];\n        metadata[mapping.local] = mapping.xform(metadata, resource[mapping.server]);\n    }\n    addRef(metadata, authWrapper);\n    return metadata;\n}\nexport function fromResourceString(authWrapper, resourceString, mappings) {\n    var obj = json.jsonObjectOrNull(resourceString);\n    if (obj === null) {\n        return null;\n    }\n    var resource = obj;\n    return fromResource(authWrapper, resource, mappings);\n}\nexport function toResourceString(metadata, mappings) {\n    var resource = {};\n    var len = mappings.length;\n    for (var i = 0; i < len; i++) {\n        var mapping = mappings[i];\n        if (mapping.writable) {\n            resource[mapping.server] = metadata[mapping.local];\n        }\n    }\n    return JSON.stringify(resource);\n}\nexport function metadataValidator(p) {\n    var validType = p && type.isObject(p);\n    if (!validType) {\n        throw 'Expected Metadata object.';\n    }\n    for (var key in p) {\n        var val = p[key];\n        if (key === 'customMetadata') {\n            if (!type.isObject(val)) {\n                throw 'Expected object for \\'customMetadata\\' mapping.';\n            }\n        }\n        else {\n            if (type.isNonNullObject(val)) {\n                throw \"Mapping for '\" + key + \"' cannot be an object.\";\n            }\n        }\n    }\n}\n\n//# sourceMappingURL=metadata.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/metadata.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as errorsExports from './error';\nimport * as MetadataUtils from './metadata';\nimport * as type from './type';\n/**\n * @param name Name of the function.\n * @param specs Argument specs.\n * @param passed The actual arguments passed to the function.\n * @throws {fbs.Error} If the arguments are invalid.\n */\nexport function validate(name, specs, passed) {\n    var minArgs = specs.length;\n    var maxArgs = specs.length;\n    for (var i = 0; i < specs.length; i++) {\n        if (specs[i].optional) {\n            minArgs = i;\n            break;\n        }\n    }\n    var validLength = minArgs <= passed.length && passed.length <= maxArgs;\n    if (!validLength) {\n        throw errorsExports.invalidArgumentCount(minArgs, maxArgs, name, passed.length);\n    }\n    for (var i = 0; i < passed.length; i++) {\n        try {\n            specs[i].validator(passed[i]);\n        }\n        catch (e) {\n            if (e instanceof Error) {\n                throw errorsExports.invalidArgument(i, name, e.message);\n            }\n            else {\n                throw errorsExports.invalidArgument(i, name, e);\n            }\n        }\n    }\n}\n/**\n * @struct\n */\nvar ArgSpec = /** @class */ (function () {\n    function ArgSpec(validator, opt_optional) {\n        var self = this;\n        this.validator = function (p) {\n            if (self.optional && !type.isJustDef(p)) {\n                return;\n            }\n            validator(p);\n        };\n        this.optional = !!opt_optional;\n    }\n    return ArgSpec;\n}());\nexport { ArgSpec };\nexport function and_(v1, v2) {\n    return function (p) {\n        v1(p);\n        v2(p);\n    };\n}\nexport function stringSpec(opt_validator, opt_optional) {\n    function stringValidator(p) {\n        if (!type.isString(p)) {\n            throw 'Expected string.';\n        }\n    }\n    var validator;\n    if (opt_validator) {\n        validator = and_(stringValidator, opt_validator);\n    }\n    else {\n        validator = stringValidator;\n    }\n    return new ArgSpec(validator, opt_optional);\n}\nexport function uploadDataSpec() {\n    function validator(p) {\n        var valid = p instanceof Uint8Array ||\n            p instanceof ArrayBuffer ||\n            (type.isNativeBlobDefined() && p instanceof Blob);\n        if (!valid) {\n            throw 'Expected Blob or File.';\n        }\n    }\n    return new ArgSpec(validator);\n}\nexport function metadataSpec(opt_optional) {\n    return new ArgSpec(MetadataUtils.metadataValidator, opt_optional);\n}\nexport function nonNegativeNumberSpec() {\n    function validator(p) {\n        var valid = type.isNumber(p) && p >= 0;\n        if (!valid) {\n            throw 'Expected a number 0 or greater.';\n        }\n    }\n    return new ArgSpec(validator);\n}\nexport function looseObjectSpec(opt_validator, opt_optional) {\n    function validator(p) {\n        var isLooseObject = p === null || (type.isDef(p) && p instanceof Object);\n        if (!isLooseObject) {\n            throw 'Expected an Object.';\n        }\n        if (opt_validator !== undefined && opt_validator !== null) {\n            opt_validator(p);\n        }\n    }\n    return new ArgSpec(validator, opt_optional);\n}\nexport function nullFunctionSpec(opt_optional) {\n    function validator(p) {\n        var valid = p === null || type.isFunction(p);\n        if (!valid) {\n            throw 'Expected a Function.';\n        }\n    }\n    return new ArgSpec(validator, opt_optional);\n}\n\n//# sourceMappingURL=args.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/args.js","import * as type from './type';\nfunction getBlobBuilder() {\n    if (typeof BlobBuilder !== 'undefined') {\n        return BlobBuilder;\n    }\n    else if (typeof WebKitBlobBuilder !== 'undefined') {\n        return WebKitBlobBuilder;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * Concatenates one or more values together and converts them to a Blob.\n *\n * @param var_args The values that will make up the resulting blob.\n * @return The blob.\n */\nexport function getBlob() {\n    var var_args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        var_args[_i] = arguments[_i];\n    }\n    var BlobBuilder = getBlobBuilder();\n    if (BlobBuilder !== undefined) {\n        var bb = new BlobBuilder();\n        for (var i = 0; i < var_args.length; i++) {\n            bb.append(var_args[i]);\n        }\n        return bb.getBlob();\n    }\n    else {\n        if (type.isNativeBlobDefined()) {\n            return new Blob(var_args);\n        }\n        else {\n            throw Error(\"This browser doesn't seem to support creating Blobs\");\n        }\n    }\n}\n/**\n * Slices the blob. The returned blob contains data from the start byte\n * (inclusive) till the end byte (exclusive). Negative indices cannot be used.\n *\n * @param blob The blob to be sliced.\n * @param start Index of the starting byte.\n * @param end Index of the ending byte.\n * @return The blob slice or null if not supported.\n */\nexport function sliceBlob(blob, start, end) {\n    if (blob.webkitSlice) {\n        return blob.webkitSlice(start, end);\n    }\n    else if (blob.mozSlice) {\n        return blob.mozSlice(start, end);\n    }\n    else if (blob.slice) {\n        return blob.slice(start, end);\n    }\n    return null;\n}\n\n//# sourceMappingURL=fs.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/fs.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Returns true if the object is contained in the array (compared with ===).\n * @template T\n */\nexport function contains(array, elem) {\n    return array.indexOf(elem) !== -1;\n}\n/**\n * Returns a shallow copy of the array or array-like object (e.g. arguments).\n * @template T\n */\nexport function clone(arraylike) {\n    return Array.prototype.slice.call(arraylike);\n}\n/**\n * Removes the given element from the given array, if it is contained.\n * Directly modifies the passed-in array.\n * @template T\n */\nexport function remove(array, elem) {\n    var i = array.indexOf(elem);\n    if (i !== -1) {\n        array.splice(i, 1);\n    }\n}\n\n//# sourceMappingURL=array.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/array.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as array from './array';\nimport { FbsBlob } from './blob';\nimport * as errorsExports from './error';\nimport * as MetadataUtils from './metadata';\nimport * as object from './object';\nimport { RequestInfo } from './requestinfo';\nimport * as type from './type';\nimport * as UrlUtils from './url';\n/**\n * Throws the UNKNOWN FirebaseStorageError if cndn is false.\n */\nexport function handlerCheck(cndn) {\n    if (!cndn) {\n        throw errorsExports.unknown();\n    }\n}\nexport function metadataHandler(authWrapper, mappings) {\n    function handler(xhr, text) {\n        var metadata = MetadataUtils.fromResourceString(authWrapper, text, mappings);\n        handlerCheck(metadata !== null);\n        return metadata;\n    }\n    return handler;\n}\nexport function sharedErrorHandler(location) {\n    function errorHandler(xhr, err) {\n        var newErr;\n        if (xhr.getStatus() === 401) {\n            newErr = errorsExports.unauthenticated();\n        }\n        else {\n            if (xhr.getStatus() === 402) {\n                newErr = errorsExports.quotaExceeded(location.bucket);\n            }\n            else {\n                if (xhr.getStatus() === 403) {\n                    newErr = errorsExports.unauthorized(location.path);\n                }\n                else {\n                    newErr = err;\n                }\n            }\n        }\n        newErr.setServerResponseProp(err.serverResponseProp());\n        return newErr;\n    }\n    return errorHandler;\n}\nexport function objectErrorHandler(location) {\n    var shared = sharedErrorHandler(location);\n    function errorHandler(xhr, err) {\n        var newErr = shared(xhr, err);\n        if (xhr.getStatus() === 404) {\n            newErr = errorsExports.objectNotFound(location.path);\n        }\n        newErr.setServerResponseProp(err.serverResponseProp());\n        return newErr;\n    }\n    return errorHandler;\n}\nexport function getMetadata(authWrapper, location, mappings) {\n    var urlPart = location.fullServerUrl();\n    var url = UrlUtils.makeNormalUrl(urlPart);\n    var method = 'GET';\n    var timeout = authWrapper.maxOperationRetryTime();\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\n    requestInfo.errorHandler = objectErrorHandler(location);\n    return requestInfo;\n}\nexport function updateMetadata(authWrapper, location, metadata, mappings) {\n    var urlPart = location.fullServerUrl();\n    var url = UrlUtils.makeNormalUrl(urlPart);\n    var method = 'PATCH';\n    var body = MetadataUtils.toResourceString(metadata, mappings);\n    var headers = { 'Content-Type': 'application/json; charset=utf-8' };\n    var timeout = authWrapper.maxOperationRetryTime();\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\n    requestInfo.headers = headers;\n    requestInfo.body = body;\n    requestInfo.errorHandler = objectErrorHandler(location);\n    return requestInfo;\n}\nexport function deleteObject(authWrapper, location) {\n    var urlPart = location.fullServerUrl();\n    var url = UrlUtils.makeNormalUrl(urlPart);\n    var method = 'DELETE';\n    var timeout = authWrapper.maxOperationRetryTime();\n    function handler(xhr, text) { }\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\n    requestInfo.successCodes = [200, 204];\n    requestInfo.errorHandler = objectErrorHandler(location);\n    return requestInfo;\n}\nexport function determineContentType_(metadata, blob) {\n    return ((metadata && metadata['contentType']) ||\n        (blob && blob.type()) ||\n        'application/octet-stream');\n}\nexport function metadataForUpload_(location, blob, opt_metadata) {\n    var metadata = object.clone(opt_metadata);\n    metadata['fullPath'] = location.path;\n    metadata['size'] = blob.size();\n    if (!metadata['contentType']) {\n        metadata['contentType'] = determineContentType_(null, blob);\n    }\n    return metadata;\n}\nexport function multipartUpload(authWrapper, location, mappings, blob, opt_metadata) {\n    var urlPart = location.bucketOnlyServerUrl();\n    var headers = {\n        'X-Goog-Upload-Protocol': 'multipart'\n    };\n    function genBoundary() {\n        var str = '';\n        for (var i = 0; i < 2; i++) {\n            str =\n                str +\n                    Math.random()\n                        .toString()\n                        .slice(2);\n        }\n        return str;\n    }\n    var boundary = genBoundary();\n    headers['Content-Type'] = 'multipart/related; boundary=' + boundary;\n    var metadata = metadataForUpload_(location, blob, opt_metadata);\n    var metadataString = MetadataUtils.toResourceString(metadata, mappings);\n    var preBlobPart = '--' +\n        boundary +\n        '\\r\\n' +\n        'Content-Type: application/json; charset=utf-8\\r\\n\\r\\n' +\n        metadataString +\n        '\\r\\n--' +\n        boundary +\n        '\\r\\n' +\n        'Content-Type: ' +\n        metadata['contentType'] +\n        '\\r\\n\\r\\n';\n    var postBlobPart = '\\r\\n--' + boundary + '--';\n    var body = FbsBlob.getBlob(preBlobPart, blob, postBlobPart);\n    if (body === null) {\n        throw errorsExports.cannotSliceBlob();\n    }\n    var urlParams = { name: metadata['fullPath'] };\n    var url = UrlUtils.makeUploadUrl(urlPart);\n    var method = 'POST';\n    var timeout = authWrapper.maxUploadRetryTime();\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\n    requestInfo.urlParams = urlParams;\n    requestInfo.headers = headers;\n    requestInfo.body = body.uploadData();\n    requestInfo.errorHandler = sharedErrorHandler(location);\n    return requestInfo;\n}\n/**\n * @param current The number of bytes that have been uploaded so far.\n * @param total The total number of bytes in the upload.\n * @param opt_finalized True if the server has finished the upload.\n * @param opt_metadata The upload metadata, should\n *     only be passed if opt_finalized is true.\n * @struct\n */\nvar ResumableUploadStatus = /** @class */ (function () {\n    function ResumableUploadStatus(current, total, finalized, metadata) {\n        this.current = current;\n        this.total = total;\n        this.finalized = !!finalized;\n        this.metadata = metadata || null;\n    }\n    return ResumableUploadStatus;\n}());\nexport { ResumableUploadStatus };\nexport function checkResumeHeader_(xhr, opt_allowed) {\n    var status;\n    try {\n        status = xhr.getResponseHeader('X-Goog-Upload-Status');\n    }\n    catch (e) {\n        handlerCheck(false);\n    }\n    var allowed = opt_allowed || ['active'];\n    handlerCheck(array.contains(allowed, status));\n    return status;\n}\nexport function createResumableUpload(authWrapper, location, mappings, blob, opt_metadata) {\n    var urlPart = location.bucketOnlyServerUrl();\n    var metadata = metadataForUpload_(location, blob, opt_metadata);\n    var urlParams = { name: metadata['fullPath'] };\n    var url = UrlUtils.makeUploadUrl(urlPart);\n    var method = 'POST';\n    var headers = {\n        'X-Goog-Upload-Protocol': 'resumable',\n        'X-Goog-Upload-Command': 'start',\n        'X-Goog-Upload-Header-Content-Length': blob.size(),\n        'X-Goog-Upload-Header-Content-Type': metadata['contentType'],\n        'Content-Type': 'application/json; charset=utf-8'\n    };\n    var body = MetadataUtils.toResourceString(metadata, mappings);\n    var timeout = authWrapper.maxUploadRetryTime();\n    function handler(xhr, text) {\n        checkResumeHeader_(xhr);\n        var url;\n        try {\n            url = xhr.getResponseHeader('X-Goog-Upload-URL');\n        }\n        catch (e) {\n            handlerCheck(false);\n        }\n        handlerCheck(type.isString(url));\n        return url;\n    }\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\n    requestInfo.urlParams = urlParams;\n    requestInfo.headers = headers;\n    requestInfo.body = body;\n    requestInfo.errorHandler = sharedErrorHandler(location);\n    return requestInfo;\n}\n/**\n * @param url From a call to fbs.requests.createResumableUpload.\n */\nexport function getResumableUploadStatus(authWrapper, location, url, blob) {\n    var headers = { 'X-Goog-Upload-Command': 'query' };\n    function handler(xhr, text) {\n        var status = checkResumeHeader_(xhr, ['active', 'final']);\n        var sizeString;\n        try {\n            sizeString = xhr.getResponseHeader('X-Goog-Upload-Size-Received');\n        }\n        catch (e) {\n            handlerCheck(false);\n        }\n        var size = parseInt(sizeString, 10);\n        handlerCheck(!isNaN(size));\n        return new ResumableUploadStatus(size, blob.size(), status === 'final');\n    }\n    var method = 'POST';\n    var timeout = authWrapper.maxUploadRetryTime();\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\n    requestInfo.headers = headers;\n    requestInfo.errorHandler = sharedErrorHandler(location);\n    return requestInfo;\n}\n/**\n * Any uploads via the resumable upload API must transfer a number of bytes\n * that is a multiple of this number.\n */\nexport var resumableUploadChunkSize = 256 * 1024;\n/**\n * @param url From a call to fbs.requests.createResumableUpload.\n * @param chunkSize Number of bytes to upload.\n * @param opt_status The previous status.\n *     If not passed or null, we start from the beginning.\n * @throws fbs.Error If the upload is already complete, the passed in status\n *     has a final size inconsistent with the blob, or the blob cannot be sliced\n *     for upload.\n */\nexport function continueResumableUpload(location, authWrapper, url, blob, chunkSize, mappings, opt_status, opt_progressCallback) {\n    // TODO(andysoto): standardize on internal asserts\n    // assert(!(opt_status && opt_status.finalized));\n    var status = new ResumableUploadStatus(0, 0);\n    if (opt_status) {\n        status.current = opt_status.current;\n        status.total = opt_status.total;\n    }\n    else {\n        status.current = 0;\n        status.total = blob.size();\n    }\n    if (blob.size() !== status.total) {\n        throw errorsExports.serverFileWrongSize();\n    }\n    var bytesLeft = status.total - status.current;\n    var bytesToUpload = bytesLeft;\n    if (chunkSize > 0) {\n        bytesToUpload = Math.min(bytesToUpload, chunkSize);\n    }\n    var startByte = status.current;\n    var endByte = startByte + bytesToUpload;\n    var uploadCommand = bytesToUpload === bytesLeft ? 'upload, finalize' : 'upload';\n    var headers = {\n        'X-Goog-Upload-Command': uploadCommand,\n        'X-Goog-Upload-Offset': status.current\n    };\n    var body = blob.slice(startByte, endByte);\n    if (body === null) {\n        throw errorsExports.cannotSliceBlob();\n    }\n    function handler(xhr, text) {\n        // TODO(andysoto): Verify the MD5 of each uploaded range:\n        // the 'x-range-md5' header comes back with status code 308 responses.\n        // We'll only be able to bail out though, because you can't re-upload a\n        // range that you previously uploaded.\n        var uploadStatus = checkResumeHeader_(xhr, ['active', 'final']);\n        var newCurrent = status.current + bytesToUpload;\n        var size = blob.size();\n        var metadata;\n        if (uploadStatus === 'final') {\n            metadata = metadataHandler(authWrapper, mappings)(xhr, text);\n        }\n        else {\n            metadata = null;\n        }\n        return new ResumableUploadStatus(newCurrent, size, uploadStatus === 'final', metadata);\n    }\n    var method = 'POST';\n    var timeout = authWrapper.maxUploadRetryTime();\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\n    requestInfo.headers = headers;\n    requestInfo.body = body.uploadData();\n    requestInfo.progressCallback = opt_progressCallback || null;\n    requestInfo.errorHandler = sharedErrorHandler(location);\n    return requestInfo;\n}\n\n//# sourceMappingURL=requests.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/requests.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Method for invoking a callback asynchronously.\n */\nimport * as promiseimpl from './promise_external';\n/**\n * Returns a function that invokes f with its arguments asynchronously as a\n * microtask, i.e. as soon as possible after the current script returns back\n * into browser code.\n */\nexport function async(f) {\n    return function () {\n        var argsToForward = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            argsToForward[_i] = arguments[_i];\n        }\n        promiseimpl.resolve(true).then(function () {\n            f.apply(null, argsToForward);\n        });\n    };\n}\n\n//# sourceMappingURL=async.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/async.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Defines methods used to actually send HTTP requests from\n * abstract representations.\n */\nimport firebase from '@firebase/app';\nimport * as array from './array';\nimport * as backoff from './backoff';\nimport * as errorsExports from './error';\nimport * as object from './object';\nimport * as promiseimpl from './promise_external';\nimport * as type from './type';\nimport * as UrlUtils from './url';\nimport * as XhrIoExports from './xhrio';\n/**\n * @struct\n * @template T\n */\nvar NetworkRequest = /** @class */ (function () {\n    function NetworkRequest(url, method, headers, body, successCodes, additionalRetryCodes, callback, errorCallback, timeout, progressCallback, pool) {\n        this.pendingXhr_ = null;\n        this.backoffId_ = null;\n        this.resolve_ = null;\n        this.reject_ = null;\n        this.canceled_ = false;\n        this.appDelete_ = false;\n        this.url_ = url;\n        this.method_ = method;\n        this.headers_ = headers;\n        this.body_ = body;\n        this.successCodes_ = successCodes.slice();\n        this.additionalRetryCodes_ = additionalRetryCodes.slice();\n        this.callback_ = callback;\n        this.errorCallback_ = errorCallback;\n        this.progressCallback_ = progressCallback;\n        this.timeout_ = timeout;\n        this.pool_ = pool;\n        var self = this;\n        this.promise_ = promiseimpl.make(function (resolve, reject) {\n            self.resolve_ = resolve;\n            self.reject_ = reject;\n            self.start_();\n        });\n    }\n    /**\n     * Actually starts the retry loop.\n     */\n    NetworkRequest.prototype.start_ = function () {\n        var self = this;\n        function doTheRequest(backoffCallback, canceled) {\n            if (canceled) {\n                backoffCallback(false, new RequestEndStatus(false, null, true));\n                return;\n            }\n            var xhr = self.pool_.createXhrIo();\n            self.pendingXhr_ = xhr;\n            function progressListener(progressEvent) {\n                var loaded = progressEvent.loaded;\n                var total = progressEvent.lengthComputable ? progressEvent.total : -1;\n                if (self.progressCallback_ !== null) {\n                    self.progressCallback_(loaded, total);\n                }\n            }\n            if (self.progressCallback_ !== null) {\n                xhr.addUploadProgressListener(progressListener);\n            }\n            xhr\n                .send(self.url_, self.method_, self.body_, self.headers_)\n                .then(function (xhr) {\n                if (self.progressCallback_ !== null) {\n                    xhr.removeUploadProgressListener(progressListener);\n                }\n                self.pendingXhr_ = null;\n                xhr = xhr;\n                var hitServer = xhr.getErrorCode() === XhrIoExports.ErrorCode.NO_ERROR;\n                var status = xhr.getStatus();\n                if (!hitServer || self.isRetryStatusCode_(status)) {\n                    var wasCanceled = xhr.getErrorCode() === XhrIoExports.ErrorCode.ABORT;\n                    backoffCallback(false, new RequestEndStatus(false, null, wasCanceled));\n                    return;\n                }\n                var successCode = array.contains(self.successCodes_, status);\n                backoffCallback(true, new RequestEndStatus(successCode, xhr));\n            });\n        }\n        /**\n         * @param requestWentThrough True if the request eventually went\n         *     through, false if it hit the retry limit or was canceled.\n         */\n        function backoffDone(requestWentThrough, status) {\n            var resolve = self.resolve_;\n            var reject = self.reject_;\n            var xhr = status.xhr;\n            if (status.wasSuccessCode) {\n                try {\n                    var result = self.callback_(xhr, xhr.getResponseText());\n                    if (type.isJustDef(result)) {\n                        resolve(result);\n                    }\n                    else {\n                        resolve();\n                    }\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }\n            else {\n                if (xhr !== null) {\n                    var err = errorsExports.unknown();\n                    err.setServerResponseProp(xhr.getResponseText());\n                    if (self.errorCallback_) {\n                        reject(self.errorCallback_(xhr, err));\n                    }\n                    else {\n                        reject(err);\n                    }\n                }\n                else {\n                    if (status.canceled) {\n                        var err = self.appDelete_\n                            ? errorsExports.appDeleted()\n                            : errorsExports.canceled();\n                        reject(err);\n                    }\n                    else {\n                        var err = errorsExports.retryLimitExceeded();\n                        reject(err);\n                    }\n                }\n            }\n        }\n        if (this.canceled_) {\n            backoffDone(false, new RequestEndStatus(false, null, true));\n        }\n        else {\n            this.backoffId_ = backoff.start(doTheRequest, backoffDone, this.timeout_);\n        }\n    };\n    /** @inheritDoc */\n    NetworkRequest.prototype.getPromise = function () {\n        return this.promise_;\n    };\n    /** @inheritDoc */\n    NetworkRequest.prototype.cancel = function (appDelete) {\n        this.canceled_ = true;\n        this.appDelete_ = appDelete || false;\n        if (this.backoffId_ !== null) {\n            backoff.stop(this.backoffId_);\n        }\n        if (this.pendingXhr_ !== null) {\n            this.pendingXhr_.abort();\n        }\n    };\n    NetworkRequest.prototype.isRetryStatusCode_ = function (status) {\n        // The codes for which to retry came from this page:\n        // https://cloud.google.com/storage/docs/exponential-backoff\n        var isFiveHundredCode = status >= 500 && status < 600;\n        var extraRetryCodes = [\n            // Request Timeout: web server didn't receive full request in time.\n            408,\n            // Too Many Requests: you're getting rate-limited, basically.\n            429\n        ];\n        var isExtraRetryCode = array.contains(extraRetryCodes, status);\n        var isRequestSpecificRetryCode = array.contains(this.additionalRetryCodes_, status);\n        return isFiveHundredCode || isExtraRetryCode || isRequestSpecificRetryCode;\n    };\n    return NetworkRequest;\n}());\n/**\n * A collection of information about the result of a network request.\n * @param opt_canceled Defaults to false.\n * @struct\n */\nvar RequestEndStatus = /** @class */ (function () {\n    function RequestEndStatus(wasSuccessCode, xhr, opt_canceled) {\n        this.wasSuccessCode = wasSuccessCode;\n        this.xhr = xhr;\n        this.canceled = !!opt_canceled;\n    }\n    return RequestEndStatus;\n}());\nexport { RequestEndStatus };\nexport function addAuthHeader_(headers, authToken) {\n    if (authToken !== null && authToken.length > 0) {\n        headers['Authorization'] = 'Firebase ' + authToken;\n    }\n}\nexport function addVersionHeader_(headers) {\n    var number = typeof firebase !== 'undefined' ? firebase.SDK_VERSION : 'AppManager';\n    headers['X-Firebase-Storage-Version'] = 'webjs/' + number;\n}\n/**\n * @template T\n */\nexport function makeRequest(requestInfo, authToken, pool) {\n    var queryPart = UrlUtils.makeQueryString(requestInfo.urlParams);\n    var url = requestInfo.url + queryPart;\n    var headers = object.clone(requestInfo.headers);\n    addAuthHeader_(headers, authToken);\n    addVersionHeader_(headers);\n    return new NetworkRequest(url, requestInfo.method, headers, requestInfo.body, requestInfo.successCodes, requestInfo.additionalRetryCodes, requestInfo.handler, requestInfo.errorHandler, requestInfo.timeout, requestInfo.progressCallback, pool);\n}\n\n//# sourceMappingURL=request.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/request.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport firebase from '@firebase/app';\nimport { StringFormat } from './src/implementation/string';\nimport { TaskEvent } from './src/implementation/taskenums';\nimport { TaskState } from './src/implementation/taskenums';\nimport { XhrIoPool } from './src/implementation/xhriopool';\nimport { Reference } from './src/reference';\nimport { Service } from './src/service';\n/**\n * Type constant for Firebase Storage.\n */\nvar STORAGE_TYPE = 'storage';\nfunction factory(app, unused, opt_url) {\n    return new Service(app, new XhrIoPool(), opt_url);\n}\nexport function registerStorage(instance) {\n    var namespaceExports = {\n        // no-inline\n        TaskState: TaskState,\n        TaskEvent: TaskEvent,\n        StringFormat: StringFormat,\n        Storage: Service,\n        Reference: Reference\n    };\n    instance.INTERNAL.registerService(STORAGE_TYPE, factory, namespaceExports, undefined, \n    // Allow multiple storage instances per app.\n    true);\n}\nregisterStorage(firebase);\n\n//# sourceMappingURL=index.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/storage/dist/esm/index.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @enum{number}\n */\nexport var ErrorCode;\n(function (ErrorCode) {\n    ErrorCode[ErrorCode[\"NO_ERROR\"] = 0] = \"NO_ERROR\";\n    ErrorCode[ErrorCode[\"NETWORK_ERROR\"] = 1] = \"NETWORK_ERROR\";\n    ErrorCode[ErrorCode[\"ABORT\"] = 2] = \"ABORT\";\n})(ErrorCode = ErrorCode || (ErrorCode = {}));\n\n//# sourceMappingURL=xhrio.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/xhrio.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Constants used in the Firebase Storage library.\n */\n/**\n * Domain and scheme for API calls.\n */\nexport var domainBase = 'https://firebasestorage.googleapis.com';\n/**\n * Domain and scheme for object downloads.\n */\nexport var downloadBase = 'https://firebasestorage.googleapis.com';\n/**\n * Base URL for non-upload calls to the API.\n */\nexport var apiBaseUrl = '/v0';\n/**\n * Base URL for upload calls to the API.\n */\nexport var apiUploadBaseUrl = '/v0';\nexport function setDomainBase(domainBase) {\n    domainBase = domainBase;\n}\nexport var configOption = 'storageBucket';\n/**\n * 1 minute\n */\nexport var shortMaxOperationRetryTime = 1 * 60 * 1000;\n/**\n * 2 minutes\n */\nexport var defaultMaxOperationRetryTime = 2 * 60 * 1000;\n/**\n * 10 minutes\n */\nexport var defaultMaxUploadRetryTime = 10 * 60 * 100;\n/**\n * This is the value of Number.MIN_SAFE_INTEGER, which is not well supported\n * enough for us to use it directly.\n */\nexport var minSafeInteger = -9007199254740991;\n\n//# sourceMappingURL=constants.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/constants.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as errorsExports from './error';\nimport * as object from './object';\nimport * as promiseimpl from './promise_external';\nimport * as type from './type';\nimport * as XhrIoExports from './xhrio';\n/**\n * We use this instead of goog.net.XhrIo because goog.net.XhrIo is hyuuuuge and\n * doesn't work in React Native on Android.\n */\nvar NetworkXhrIo = /** @class */ (function () {\n    function NetworkXhrIo() {\n        var _this = this;\n        this.sent_ = false;\n        this.xhr_ = new XMLHttpRequest();\n        this.errorCode_ = XhrIoExports.ErrorCode.NO_ERROR;\n        this.sendPromise_ = promiseimpl.make(function (resolve, reject) {\n            _this.xhr_.addEventListener('abort', function (event) {\n                _this.errorCode_ = XhrIoExports.ErrorCode.ABORT;\n                resolve(_this);\n            });\n            _this.xhr_.addEventListener('error', function (event) {\n                _this.errorCode_ = XhrIoExports.ErrorCode.NETWORK_ERROR;\n                resolve(_this);\n            });\n            _this.xhr_.addEventListener('load', function (event) {\n                resolve(_this);\n            });\n        });\n    }\n    /**\n     * @override\n     */\n    NetworkXhrIo.prototype.send = function (url, method, opt_body, opt_headers) {\n        var _this = this;\n        if (this.sent_) {\n            throw errorsExports.internalError('cannot .send() more than once');\n        }\n        this.sent_ = true;\n        this.xhr_.open(method, url, true);\n        if (type.isDef(opt_headers)) {\n            var headers = opt_headers;\n            object.forEach(headers, function (key, val) {\n                _this.xhr_.setRequestHeader(key, val.toString());\n            });\n        }\n        if (type.isDef(opt_body)) {\n            this.xhr_.send(opt_body);\n        }\n        else {\n            this.xhr_.send();\n        }\n        return this.sendPromise_;\n    };\n    /**\n     * @override\n     */\n    NetworkXhrIo.prototype.getErrorCode = function () {\n        if (!this.sent_) {\n            throw errorsExports.internalError('cannot .getErrorCode() before sending');\n        }\n        return this.errorCode_;\n    };\n    /**\n     * @override\n     */\n    NetworkXhrIo.prototype.getStatus = function () {\n        if (!this.sent_) {\n            throw errorsExports.internalError('cannot .getStatus() before sending');\n        }\n        try {\n            return this.xhr_.status;\n        }\n        catch (e) {\n            return -1;\n        }\n    };\n    /**\n     * @override\n     */\n    NetworkXhrIo.prototype.getResponseText = function () {\n        if (!this.sent_) {\n            throw errorsExports.internalError('cannot .getResponseText() before sending');\n        }\n        return this.xhr_.responseText;\n    };\n    /**\n     * Aborts the request.\n     * @override\n     */\n    NetworkXhrIo.prototype.abort = function () {\n        this.xhr_.abort();\n    };\n    /**\n     * @override\n     */\n    NetworkXhrIo.prototype.getResponseHeader = function (header) {\n        return this.xhr_.getResponseHeader(header);\n    };\n    /**\n     * @override\n     */\n    NetworkXhrIo.prototype.addUploadProgressListener = function (listener) {\n        if (type.isDef(this.xhr_.upload)) {\n            this.xhr_.upload.addEventListener('progress', listener);\n        }\n    };\n    /**\n     * @override\n     */\n    NetworkXhrIo.prototype.removeUploadProgressListener = function (listener) {\n        if (type.isDef(this.xhr_.upload)) {\n            this.xhr_.upload.removeEventListener('progress', listener);\n        }\n    };\n    return NetworkXhrIo;\n}());\nexport { NetworkXhrIo };\n\n//# sourceMappingURL=xhrio_network.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/xhrio_network.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { NetworkXhrIo } from './xhrio_network';\n/**\n * Factory-like class for creating XhrIo instances.\n */\nvar XhrIoPool = /** @class */ (function () {\n    function XhrIoPool() {\n    }\n    XhrIoPool.prototype.createXhrIo = function () {\n        return new NetworkXhrIo();\n    };\n    return XhrIoPool;\n}());\nexport { XhrIoPool };\n\n//# sourceMappingURL=xhriopool.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/xhriopool.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Functionality related to the parsing/composition of bucket/\n * object location.\n */\nimport * as errorsExports from './error';\n/**\n * @struct\n */\nvar Location = /** @class */ (function () {\n    function Location(bucket, path) {\n        this.bucket = bucket;\n        this.path_ = path;\n    }\n    Object.defineProperty(Location.prototype, \"path\", {\n        get: function () {\n            return this.path_;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Location.prototype.fullServerUrl = function () {\n        var encode = encodeURIComponent;\n        return '/b/' + encode(this.bucket) + '/o/' + encode(this.path);\n    };\n    Location.prototype.bucketOnlyServerUrl = function () {\n        var encode = encodeURIComponent;\n        return '/b/' + encode(this.bucket) + '/o';\n    };\n    Location.makeFromBucketSpec = function (bucketString) {\n        var bucketLocation;\n        try {\n            bucketLocation = Location.makeFromUrl(bucketString);\n        }\n        catch (e) {\n            // Not valid URL, use as-is. This lets you put bare bucket names in\n            // config.\n            return new Location(bucketString, '');\n        }\n        if (bucketLocation.path === '') {\n            return bucketLocation;\n        }\n        else {\n            throw errorsExports.invalidDefaultBucket(bucketString);\n        }\n    };\n    Location.makeFromUrl = function (url) {\n        var location = null;\n        var bucketDomain = '([A-Za-z0-9.\\\\-]+)';\n        function gsModify(loc) {\n            if (loc.path.charAt(loc.path.length - 1) === '/') {\n                loc.path_ = loc.path_.slice(0, -1);\n            }\n        }\n        var gsPath = '(/(.*))?$';\n        var path = '(/([^?#]*).*)?$';\n        var gsRegex = new RegExp('^gs://' + bucketDomain + gsPath, 'i');\n        var gsIndices = { bucket: 1, path: 3 };\n        function httpModify(loc) {\n            loc.path_ = decodeURIComponent(loc.path);\n        }\n        var version = 'v[A-Za-z0-9_]+';\n        var httpRegex = new RegExp('^https?://firebasestorage\\\\.googleapis\\\\.com/' +\n            version +\n            '/b/' +\n            bucketDomain +\n            '/o' +\n            path, 'i');\n        var httpIndices = { bucket: 1, path: 3 };\n        var groups = [\n            { regex: gsRegex, indices: gsIndices, postModify: gsModify },\n            { regex: httpRegex, indices: httpIndices, postModify: httpModify }\n        ];\n        for (var i = 0; i < groups.length; i++) {\n            var group = groups[i];\n            var captures = group.regex.exec(url);\n            if (captures) {\n                var bucketValue = captures[group.indices.bucket];\n                var pathValue = captures[group.indices.path];\n                if (!pathValue) {\n                    pathValue = '';\n                }\n                location = new Location(bucketValue, pathValue);\n                group.postModify(location);\n                break;\n            }\n        }\n        if (location == null) {\n            throw errorsExports.invalidUrl(url);\n        }\n        return location;\n    };\n    return Location;\n}());\nexport { Location };\n\n//# sourceMappingURL=location.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/location.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @file Provides a Blob-like wrapper for various binary types (including the\n * native Blob type). This makes it possible to upload types like ArrayBuffers,\n * making uploads possible in environments without the native Blob type.\n */\nimport * as fs from './fs';\nimport * as string from './string';\nimport { StringFormat } from './string';\nimport * as type from './type';\n/**\n * @param opt_elideCopy If true, doesn't copy mutable input data\n *     (e.g. Uint8Arrays). Pass true only if you know the objects will not be\n *     modified after this blob's construction.\n */\nvar FbsBlob = /** @class */ (function () {\n    function FbsBlob(data, opt_elideCopy) {\n        var size = 0;\n        var blobType = '';\n        if (type.isNativeBlob(data)) {\n            this.data_ = data;\n            size = data.size;\n            blobType = data.type;\n        }\n        else if (data instanceof ArrayBuffer) {\n            if (opt_elideCopy) {\n                this.data_ = new Uint8Array(data);\n            }\n            else {\n                this.data_ = new Uint8Array(data.byteLength);\n                this.data_.set(new Uint8Array(data));\n            }\n            size = this.data_.length;\n        }\n        else if (data instanceof Uint8Array) {\n            if (opt_elideCopy) {\n                this.data_ = data;\n            }\n            else {\n                this.data_ = new Uint8Array(data.length);\n                this.data_.set(data);\n            }\n            size = data.length;\n        }\n        this.size_ = size;\n        this.type_ = blobType;\n    }\n    FbsBlob.prototype.size = function () {\n        return this.size_;\n    };\n    FbsBlob.prototype.type = function () {\n        return this.type_;\n    };\n    FbsBlob.prototype.slice = function (startByte, endByte) {\n        if (type.isNativeBlob(this.data_)) {\n            var realBlob = this.data_;\n            var sliced = fs.sliceBlob(realBlob, startByte, endByte);\n            if (sliced === null) {\n                return null;\n            }\n            return new FbsBlob(sliced);\n        }\n        else {\n            var slice = new Uint8Array(this.data_.buffer, startByte, endByte - startByte);\n            return new FbsBlob(slice, true);\n        }\n    };\n    FbsBlob.getBlob = function () {\n        var var_args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            var_args[_i] = arguments[_i];\n        }\n        if (type.isNativeBlobDefined()) {\n            var blobby = var_args.map(function (val) {\n                if (val instanceof FbsBlob) {\n                    return val.data_;\n                }\n                else {\n                    return val;\n                }\n            });\n            return new FbsBlob(fs.getBlob.apply(null, blobby));\n        }\n        else {\n            var uint8Arrays = var_args.map(function (val) {\n                if (type.isString(val)) {\n                    return string.dataFromString(StringFormat.RAW, val).data;\n                }\n                else {\n                    // Blobs don't exist, so this has to be a Uint8Array.\n                    return val.data_;\n                }\n            });\n            var finalLength_1 = 0;\n            uint8Arrays.forEach(function (array) {\n                finalLength_1 += array.byteLength;\n            });\n            var merged_1 = new Uint8Array(finalLength_1);\n            var index_1 = 0;\n            uint8Arrays.forEach(function (array) {\n                for (var i = 0; i < array.length; i++) {\n                    merged_1[index_1++] = array[i];\n                }\n            });\n            return new FbsBlob(merged_1, true);\n        }\n    };\n    FbsBlob.prototype.uploadData = function () {\n        return this.data_;\n    };\n    return FbsBlob;\n}());\nexport { FbsBlob };\n\n//# sourceMappingURL=blob.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/blob.js","var RequestInfo = /** @class */ (function () {\n    function RequestInfo(url, method, \n        /**\n           * Returns the value with which to resolve the request's promise. Only called\n           * if the request is successful. Throw from this function to reject the\n           * returned Request's promise with the thrown error.\n           * Note: The XhrIo passed to this function may be reused after this callback\n           * returns. Do not keep a reference to it in any way.\n           */\n        handler, timeout) {\n        this.url = url;\n        this.method = method;\n        this.handler = handler;\n        this.timeout = timeout;\n        this.urlParams = {};\n        this.headers = {};\n        this.body = null;\n        this.errorHandler = null;\n        /**\n         * Called with the current number of bytes uploaded and total size (-1 if not\n         * computable) of the request body (i.e. used to report upload progress).\n         */\n        this.progressCallback = null;\n        this.successCodes = [200];\n        this.additionalRetryCodes = [];\n    }\n    return RequestInfo;\n}());\nexport { RequestInfo };\n\n//# sourceMappingURL=requestinfo.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/requestinfo.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as type from './type';\n/**\n * @struct\n */\nvar Observer = /** @class */ (function () {\n    function Observer(nextOrObserver, opt_error, opt_complete) {\n        var asFunctions = type.isFunction(nextOrObserver) ||\n            type.isDef(opt_error) ||\n            type.isDef(opt_complete);\n        if (asFunctions) {\n            this.next = nextOrObserver;\n            this.error = opt_error || null;\n            this.complete = opt_complete || null;\n        }\n        else {\n            var observer = nextOrObserver;\n            this.next = observer.next || null;\n            this.error = observer.error || null;\n            this.complete = observer.complete || null;\n        }\n    }\n    return Observer;\n}());\nexport { Observer };\n\n//# sourceMappingURL=observer.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/observer.js","var UploadTaskSnapshot = /** @class */ (function () {\n    function UploadTaskSnapshot(bytesTransferred, totalBytes, state, metadata, task, ref) {\n        this.bytesTransferred = bytesTransferred;\n        this.totalBytes = totalBytes;\n        this.state = state;\n        this.metadata = metadata;\n        this.task = task;\n        this.ref = ref;\n    }\n    Object.defineProperty(UploadTaskSnapshot.prototype, \"downloadURL\", {\n        get: function () {\n            if (this.metadata !== null) {\n                var urls = this.metadata['downloadURLs'];\n                if (urls != null && urls[0] != null) {\n                    return urls[0];\n                }\n                else {\n                    return null;\n                }\n            }\n            else {\n                return null;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return UploadTaskSnapshot;\n}());\nexport { UploadTaskSnapshot };\n\n//# sourceMappingURL=tasksnapshot.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/tasksnapshot.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Defines types for interacting with blob transfer tasks.\n */\nimport { InternalTaskState } from './implementation/taskenums';\nimport { Observer } from './implementation/observer';\nimport { TaskEvent, TaskState } from './implementation/taskenums';\nimport { UploadTaskSnapshot } from './tasksnapshot';\nimport * as fbsArgs from './implementation/args';\nimport * as fbsArray from './implementation/array';\nimport { async as fbsAsync } from './implementation/async';\nimport * as errors from './implementation/error';\nimport * as fbsPromiseimpl from './implementation/promise_external';\nimport * as fbsRequests from './implementation/requests';\nimport * as fbsTaskEnums from './implementation/taskenums';\nimport * as typeUtils from './implementation/type';\n/**\n * Represents a blob being uploaded. Can be used to pause/resume/cancel the\n * upload and manage callbacks for various events.\n */\nvar UploadTask = /** @class */ (function () {\n    /**\n     * @param ref The firebaseStorage.Reference object this task came\n     *     from, untyped to avoid cyclic dependencies.\n     * @param blob The blob to upload.\n     */\n    function UploadTask(ref, authWrapper, location, mappings, blob, metadata) {\n        if (metadata === void 0) { metadata = null; }\n        var _this = this;\n        this.transferred_ = 0;\n        this.needToFetchStatus_ = false;\n        this.needToFetchMetadata_ = false;\n        this.observers_ = [];\n        this.error_ = null;\n        this.uploadUrl_ = null;\n        this.request_ = null;\n        this.chunkMultiplier_ = 1;\n        this.resolve_ = null;\n        this.reject_ = null;\n        this.ref_ = ref;\n        this.authWrapper_ = authWrapper;\n        this.location_ = location;\n        this.blob_ = blob;\n        this.metadata_ = metadata;\n        this.mappings_ = mappings;\n        this.resumable_ = this.shouldDoResumable_(this.blob_);\n        this.state_ = InternalTaskState.RUNNING;\n        this.errorHandler_ = function (error) {\n            _this.request_ = null;\n            _this.chunkMultiplier_ = 1;\n            if (error.codeEquals(errors.Code.CANCELED)) {\n                _this.needToFetchStatus_ = true;\n                _this.completeTransitions_();\n            }\n            else {\n                _this.error_ = error;\n                _this.transition_(InternalTaskState.ERROR);\n            }\n        };\n        this.metadataErrorHandler_ = function (error) {\n            _this.request_ = null;\n            if (error.codeEquals(errors.Code.CANCELED)) {\n                _this.completeTransitions_();\n            }\n            else {\n                _this.error_ = error;\n                _this.transition_(InternalTaskState.ERROR);\n            }\n        };\n        this.promise_ = fbsPromiseimpl.make(function (resolve, reject) {\n            _this.resolve_ = resolve;\n            _this.reject_ = reject;\n            _this.start_();\n        });\n        // Prevent uncaught rejections on the internal promise from bubbling out\n        // to the top level with a dummy handler.\n        this.promise_.then(null, function () { });\n    }\n    UploadTask.prototype.makeProgressCallback_ = function () {\n        var _this = this;\n        var sizeBefore = this.transferred_;\n        return function (loaded, total) {\n            _this.updateProgress_(sizeBefore + loaded);\n        };\n    };\n    UploadTask.prototype.shouldDoResumable_ = function (blob) {\n        return blob.size() > 256 * 1024;\n    };\n    UploadTask.prototype.start_ = function () {\n        if (this.state_ !== InternalTaskState.RUNNING) {\n            // This can happen if someone pauses us in a resume callback, for example.\n            return;\n        }\n        if (this.request_ !== null) {\n            return;\n        }\n        if (this.resumable_) {\n            if (this.uploadUrl_ === null) {\n                this.createResumable_();\n            }\n            else {\n                if (this.needToFetchStatus_) {\n                    this.fetchStatus_();\n                }\n                else {\n                    if (this.needToFetchMetadata_) {\n                        // Happens if we miss the metadata on upload completion.\n                        this.fetchMetadata_();\n                    }\n                    else {\n                        this.continueUpload_();\n                    }\n                }\n            }\n        }\n        else {\n            this.oneShotUpload_();\n        }\n    };\n    UploadTask.prototype.resolveToken_ = function (callback) {\n        var _this = this;\n        this.authWrapper_.getAuthToken().then(function (authToken) {\n            switch (_this.state_) {\n                case InternalTaskState.RUNNING:\n                    callback(authToken);\n                    break;\n                case InternalTaskState.CANCELING:\n                    _this.transition_(InternalTaskState.CANCELED);\n                    break;\n                case InternalTaskState.PAUSING:\n                    _this.transition_(InternalTaskState.PAUSED);\n                    break;\n                default:\n            }\n        });\n    };\n    // TODO(andysoto): assert false\n    UploadTask.prototype.createResumable_ = function () {\n        var _this = this;\n        this.resolveToken_(function (authToken) {\n            var requestInfo = fbsRequests.createResumableUpload(_this.authWrapper_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);\n            var createRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\n            _this.request_ = createRequest;\n            createRequest.getPromise().then(function (url) {\n                _this.request_ = null;\n                _this.uploadUrl_ = url;\n                _this.needToFetchStatus_ = false;\n                _this.completeTransitions_();\n            }, _this.errorHandler_);\n        });\n    };\n    UploadTask.prototype.fetchStatus_ = function () {\n        var _this = this;\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\n        var url = this.uploadUrl_;\n        this.resolveToken_(function (authToken) {\n            var requestInfo = fbsRequests.getResumableUploadStatus(_this.authWrapper_, _this.location_, url, _this.blob_);\n            var statusRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\n            _this.request_ = statusRequest;\n            statusRequest.getPromise().then(function (status) {\n                status = status;\n                _this.request_ = null;\n                _this.updateProgress_(status.current);\n                _this.needToFetchStatus_ = false;\n                if (status.finalized) {\n                    _this.needToFetchMetadata_ = true;\n                }\n                _this.completeTransitions_();\n            }, _this.errorHandler_);\n        });\n    };\n    UploadTask.prototype.continueUpload_ = function () {\n        var _this = this;\n        var chunkSize = fbsRequests.resumableUploadChunkSize * this.chunkMultiplier_;\n        var status = new fbsRequests.ResumableUploadStatus(this.transferred_, this.blob_.size());\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\n        var url = this.uploadUrl_;\n        this.resolveToken_(function (authToken) {\n            var requestInfo;\n            try {\n                requestInfo = fbsRequests.continueResumableUpload(_this.location_, _this.authWrapper_, url, _this.blob_, chunkSize, _this.mappings_, status, _this.makeProgressCallback_());\n            }\n            catch (e) {\n                _this.error_ = e;\n                _this.transition_(InternalTaskState.ERROR);\n                return;\n            }\n            var uploadRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\n            _this.request_ = uploadRequest;\n            uploadRequest\n                .getPromise()\n                .then(function (newStatus) {\n                _this.increaseMultiplier_();\n                _this.request_ = null;\n                _this.updateProgress_(newStatus.current);\n                if (newStatus.finalized) {\n                    _this.metadata_ = newStatus.metadata;\n                    _this.transition_(InternalTaskState.SUCCESS);\n                }\n                else {\n                    _this.completeTransitions_();\n                }\n            }, _this.errorHandler_);\n        });\n    };\n    UploadTask.prototype.increaseMultiplier_ = function () {\n        var currentSize = fbsRequests.resumableUploadChunkSize * this.chunkMultiplier_;\n        // Max chunk size is 32M.\n        if (currentSize < 32 * 1024 * 1024) {\n            this.chunkMultiplier_ *= 2;\n        }\n    };\n    UploadTask.prototype.fetchMetadata_ = function () {\n        var _this = this;\n        this.resolveToken_(function (authToken) {\n            var requestInfo = fbsRequests.getMetadata(_this.authWrapper_, _this.location_, _this.mappings_);\n            var metadataRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\n            _this.request_ = metadataRequest;\n            metadataRequest.getPromise().then(function (metadata) {\n                _this.request_ = null;\n                _this.metadata_ = metadata;\n                _this.transition_(InternalTaskState.SUCCESS);\n            }, _this.metadataErrorHandler_);\n        });\n    };\n    UploadTask.prototype.oneShotUpload_ = function () {\n        var _this = this;\n        this.resolveToken_(function (authToken) {\n            var requestInfo = fbsRequests.multipartUpload(_this.authWrapper_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);\n            var multipartRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\n            _this.request_ = multipartRequest;\n            multipartRequest.getPromise().then(function (metadata) {\n                _this.request_ = null;\n                _this.metadata_ = metadata;\n                _this.updateProgress_(_this.blob_.size());\n                _this.transition_(InternalTaskState.SUCCESS);\n            }, _this.errorHandler_);\n        });\n    };\n    UploadTask.prototype.updateProgress_ = function (transferred) {\n        var old = this.transferred_;\n        this.transferred_ = transferred;\n        // A progress update can make the \"transferred\" value smaller (e.g. a\n        // partial upload not completed by server, after which the \"transferred\"\n        // value may reset to the value at the beginning of the request).\n        if (this.transferred_ !== old) {\n            this.notifyObservers_();\n        }\n    };\n    UploadTask.prototype.transition_ = function (state) {\n        if (this.state_ === state) {\n            return;\n        }\n        switch (state) {\n            case InternalTaskState.CANCELING:\n                // TODO(andysoto):\n                // assert(this.state_ === InternalTaskState.RUNNING ||\n                //        this.state_ === InternalTaskState.PAUSING);\n                this.state_ = state;\n                if (this.request_ !== null) {\n                    this.request_.cancel();\n                }\n                break;\n            case InternalTaskState.PAUSING:\n                // TODO(andysoto):\n                // assert(this.state_ === InternalTaskState.RUNNING);\n                this.state_ = state;\n                if (this.request_ !== null) {\n                    this.request_.cancel();\n                }\n                break;\n            case InternalTaskState.RUNNING:\n                // TODO(andysoto):\n                // assert(this.state_ === InternalTaskState.PAUSED ||\n                //        this.state_ === InternalTaskState.PAUSING);\n                var wasPaused = this.state_ === InternalTaskState.PAUSED;\n                this.state_ = state;\n                if (wasPaused) {\n                    this.notifyObservers_();\n                    this.start_();\n                }\n                break;\n            case InternalTaskState.PAUSED:\n                // TODO(andysoto):\n                // assert(this.state_ === InternalTaskState.PAUSING);\n                this.state_ = state;\n                this.notifyObservers_();\n                break;\n            case InternalTaskState.CANCELED:\n                // TODO(andysoto):\n                // assert(this.state_ === InternalTaskState.PAUSED ||\n                //        this.state_ === InternalTaskState.CANCELING);\n                this.error_ = errors.canceled();\n                this.state_ = state;\n                this.notifyObservers_();\n                break;\n            case InternalTaskState.ERROR:\n                // TODO(andysoto):\n                // assert(this.state_ === InternalTaskState.RUNNING ||\n                //        this.state_ === InternalTaskState.PAUSING ||\n                //        this.state_ === InternalTaskState.CANCELING);\n                this.state_ = state;\n                this.notifyObservers_();\n                break;\n            case InternalTaskState.SUCCESS:\n                // TODO(andysoto):\n                // assert(this.state_ === InternalTaskState.RUNNING ||\n                //        this.state_ === InternalTaskState.PAUSING ||\n                //        this.state_ === InternalTaskState.CANCELING);\n                this.state_ = state;\n                this.notifyObservers_();\n                break;\n        }\n    };\n    UploadTask.prototype.completeTransitions_ = function () {\n        switch (this.state_) {\n            case InternalTaskState.PAUSING:\n                this.transition_(InternalTaskState.PAUSED);\n                break;\n            case InternalTaskState.CANCELING:\n                this.transition_(InternalTaskState.CANCELED);\n                break;\n            case InternalTaskState.RUNNING:\n                this.start_();\n                break;\n            default:\n                // TODO(andysoto): assert(false);\n                break;\n        }\n    };\n    Object.defineProperty(UploadTask.prototype, \"snapshot\", {\n        get: function () {\n            var externalState = fbsTaskEnums.taskStateFromInternalTaskState(this.state_);\n            return new UploadTaskSnapshot(this.transferred_, this.blob_.size(), externalState, this.metadata_, this, this.ref_);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Adds a callback for an event.\n     * @param type The type of event to listen for.\n     */\n    UploadTask.prototype.on = function (type, nextOrObserver, error, completed) {\n        if (nextOrObserver === void 0) { nextOrObserver = undefined; }\n        if (error === void 0) { error = undefined; }\n        if (completed === void 0) { completed = undefined; }\n        function typeValidator(_p) {\n            if (type !== TaskEvent.STATE_CHANGED) {\n                throw \"Expected one of the event types: [\" + TaskEvent.STATE_CHANGED + \"].\";\n            }\n        }\n        var nextOrObserverMessage = 'Expected a function or an Object with one of ' +\n            '`next`, `error`, `complete` properties.';\n        var nextValidator = fbsArgs.nullFunctionSpec(true).validator;\n        var observerValidator = fbsArgs.looseObjectSpec(null, true).validator;\n        function nextOrObserverValidator(p) {\n            try {\n                nextValidator(p);\n                return;\n            }\n            catch (e) { }\n            try {\n                observerValidator(p);\n                var anyDefined = typeUtils.isJustDef(p['next']) ||\n                    typeUtils.isJustDef(p['error']) ||\n                    typeUtils.isJustDef(p['complete']);\n                if (!anyDefined) {\n                    throw '';\n                }\n                return;\n            }\n            catch (e) {\n                throw nextOrObserverMessage;\n            }\n        }\n        var specs = [\n            fbsArgs.stringSpec(typeValidator),\n            fbsArgs.looseObjectSpec(nextOrObserverValidator, true),\n            fbsArgs.nullFunctionSpec(true),\n            fbsArgs.nullFunctionSpec(true)\n        ];\n        fbsArgs.validate('on', specs, arguments);\n        var self = this;\n        function makeBinder(specs) {\n            function binder(nextOrObserver, error, opt_complete) {\n                if (specs !== null) {\n                    fbsArgs.validate('on', specs, arguments);\n                }\n                var observer = new Observer(nextOrObserver, error, completed);\n                self.addObserver_(observer);\n                return function () {\n                    self.removeObserver_(observer);\n                };\n            }\n            return binder;\n        }\n        function binderNextOrObserverValidator(p) {\n            if (p === null) {\n                throw nextOrObserverMessage;\n            }\n            nextOrObserverValidator(p);\n        }\n        var binderSpecs = [\n            fbsArgs.looseObjectSpec(binderNextOrObserverValidator),\n            fbsArgs.nullFunctionSpec(true),\n            fbsArgs.nullFunctionSpec(true)\n        ];\n        var typeOnly = !(typeUtils.isJustDef(nextOrObserver) ||\n            typeUtils.isJustDef(error) ||\n            typeUtils.isJustDef(completed));\n        if (typeOnly) {\n            return makeBinder(binderSpecs);\n        }\n        else {\n            return makeBinder(null)(nextOrObserver, error, completed);\n        }\n    };\n    /**\n     * This object behaves like a Promise, and resolves with its snapshot data\n     * when the upload completes.\n     * @param onFulfilled The fulfillment callback. Promise chaining works as normal.\n     * @param onRejected The rejection callback.\n     */\n    UploadTask.prototype.then = function (onFulfilled, onRejected) {\n        // These casts are needed so that TypeScript can infer the types of the\n        // resulting Promise.\n        return this.promise_.then(onFulfilled, onRejected);\n    };\n    /**\n     * Equivalent to calling `then(null, onRejected)`.\n     */\n    UploadTask.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n    };\n    /**\n     * Adds the given observer.\n     */\n    UploadTask.prototype.addObserver_ = function (observer) {\n        this.observers_.push(observer);\n        this.notifyObserver_(observer);\n    };\n    /**\n     * Removes the given observer.\n     */\n    UploadTask.prototype.removeObserver_ = function (observer) {\n        fbsArray.remove(this.observers_, observer);\n    };\n    UploadTask.prototype.notifyObservers_ = function () {\n        var _this = this;\n        this.finishPromise_();\n        var observers = fbsArray.clone(this.observers_);\n        observers.forEach(function (observer) {\n            _this.notifyObserver_(observer);\n        });\n    };\n    UploadTask.prototype.finishPromise_ = function () {\n        if (this.resolve_ !== null) {\n            var triggered = true;\n            switch (fbsTaskEnums.taskStateFromInternalTaskState(this.state_)) {\n                case TaskState.SUCCESS:\n                    fbsAsync(this.resolve_.bind(null, this.snapshot))();\n                    break;\n                case TaskState.CANCELED:\n                case TaskState.ERROR:\n                    var toCall = this.reject_;\n                    fbsAsync(toCall.bind(null, this.error_))();\n                    break;\n                default:\n                    triggered = false;\n                    break;\n            }\n            if (triggered) {\n                this.resolve_ = null;\n                this.reject_ = null;\n            }\n        }\n    };\n    UploadTask.prototype.notifyObserver_ = function (observer) {\n        var externalState = fbsTaskEnums.taskStateFromInternalTaskState(this.state_);\n        switch (externalState) {\n            case TaskState.RUNNING:\n            case TaskState.PAUSED:\n                if (observer.next !== null) {\n                    fbsAsync(observer.next.bind(observer, this.snapshot))();\n                }\n                break;\n            case TaskState.SUCCESS:\n                if (observer.complete !== null) {\n                    fbsAsync(observer.complete.bind(observer))();\n                }\n                break;\n            case TaskState.CANCELED:\n            case TaskState.ERROR:\n                if (observer.error !== null) {\n                    fbsAsync(observer.error.bind(observer, this.error_))();\n                }\n                break;\n            default:\n                // TODO(andysoto): assert(false);\n                if (observer.error !== null) {\n                    fbsAsync(observer.error.bind(observer, this.error_))();\n                }\n        }\n    };\n    /**\n     * Resumes a paused task. Has no effect on a currently running or failed task.\n     * @return True if the operation took effect, false if ignored.\n     */\n    UploadTask.prototype.resume = function () {\n        fbsArgs.validate('resume', [], arguments);\n        var valid = this.state_ === InternalTaskState.PAUSED ||\n            this.state_ === InternalTaskState.PAUSING;\n        if (valid) {\n            this.transition_(InternalTaskState.RUNNING);\n        }\n        return valid;\n    };\n    /**\n     * Pauses a currently running task. Has no effect on a paused or failed task.\n     * @return True if the operation took effect, false if ignored.\n     */\n    UploadTask.prototype.pause = function () {\n        fbsArgs.validate('pause', [], arguments);\n        var valid = this.state_ === InternalTaskState.RUNNING;\n        if (valid) {\n            this.transition_(InternalTaskState.PAUSING);\n        }\n        return valid;\n    };\n    /**\n     * Cancels a currently running or paused task. Has no effect on a complete or\n     * failed task.\n     * @return True if the operation took effect, false if ignored.\n     */\n    UploadTask.prototype.cancel = function () {\n        fbsArgs.validate('cancel', [], arguments);\n        var valid = this.state_ === InternalTaskState.RUNNING ||\n            this.state_ === InternalTaskState.PAUSING;\n        if (valid) {\n            this.transition_(InternalTaskState.CANCELING);\n        }\n        return valid;\n    };\n    return UploadTask;\n}());\nexport { UploadTask };\n\n//# sourceMappingURL=task.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/task.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Defines the Firebase Storage Reference class.\n */\nimport * as args from './implementation/args';\nimport { FbsBlob } from './implementation/blob';\nimport * as errorsExports from './implementation/error';\nimport { Location } from './implementation/location';\nimport * as metadata from './implementation/metadata';\nimport * as object from './implementation/object';\nimport * as path from './implementation/path';\nimport * as requests from './implementation/requests';\nimport * as fbsString from './implementation/string';\nimport { StringFormat } from './implementation/string';\nimport * as type from './implementation/type';\nimport { UploadTask } from './task';\n/**\n * Provides methods to interact with a bucket in the Firebase Storage service.\n * @param location An fbs.location, or the URL at\n *     which to base this object, in one of the following forms:\n *         gs://<bucket>/<object-path>\n *         http[s]://firebasestorage.googleapis.com/\n *                     <api-version>/b/<bucket>/o/<object-path>\n *     Any query or fragment strings will be ignored in the http[s]\n *     format. If no value is passed, the storage object will use a URL based on\n *     the project ID of the base firebase.App instance.\n */\nvar Reference = /** @class */ (function () {\n    function Reference(authWrapper, location) {\n        this.authWrapper = authWrapper;\n        if (location instanceof Location) {\n            this.location = location;\n        }\n        else {\n            this.location = Location.makeFromUrl(location);\n        }\n    }\n    /**\n     * @return The URL for the bucket and path this object references,\n     *     in the form gs://<bucket>/<object-path>\n     * @override\n     */\n    Reference.prototype.toString = function () {\n        args.validate('toString', [], arguments);\n        return 'gs://' + this.location.bucket + '/' + this.location.path;\n    };\n    Reference.prototype.newRef = function (authWrapper, location) {\n        return new Reference(authWrapper, location);\n    };\n    Reference.prototype.mappings = function () {\n        return metadata.getMappings();\n    };\n    /**\n     * @return A reference to the object obtained by\n     *     appending childPath, removing any duplicate, beginning, or trailing\n     *     slashes.\n     */\n    Reference.prototype.child = function (childPath) {\n        args.validate('child', [args.stringSpec()], arguments);\n        var newPath = path.child(this.location.path, childPath);\n        var location = new Location(this.location.bucket, newPath);\n        return this.newRef(this.authWrapper, location);\n    };\n    Object.defineProperty(Reference.prototype, \"parent\", {\n        /**\n         * @return A reference to the parent of the\n         *     current object, or null if the current object is the root.\n         */\n        get: function () {\n            var newPath = path.parent(this.location.path);\n            if (newPath === null) {\n                return null;\n            }\n            var location = new Location(this.location.bucket, newPath);\n            return this.newRef(this.authWrapper, location);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Reference.prototype, \"root\", {\n        /**\n         * @return An reference to the root of this\n         *     object's bucket.\n         */\n        get: function () {\n            var location = new Location(this.location.bucket, '');\n            return this.newRef(this.authWrapper, location);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Reference.prototype, \"bucket\", {\n        get: function () {\n            return this.location.bucket;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Reference.prototype, \"fullPath\", {\n        get: function () {\n            return this.location.path;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Reference.prototype, \"name\", {\n        get: function () {\n            return path.lastComponent(this.location.path);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Reference.prototype, \"storage\", {\n        get: function () {\n            return this.authWrapper.service();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Uploads a blob to this object's location.\n     * @param data The blob to upload.\n     * @return An UploadTask that lets you control and\n     *     observe the upload.\n     */\n    Reference.prototype.put = function (data, metadata) {\n        if (metadata === void 0) { metadata = null; }\n        args.validate('put', [args.uploadDataSpec(), args.metadataSpec(true)], arguments);\n        this.throwIfRoot_('put');\n        return new UploadTask(this, this.authWrapper, this.location, this.mappings(), new FbsBlob(data), metadata);\n    };\n    /**\n     * Uploads a string to this object's location.\n     * @param string The string to upload.\n     * @param opt_format The format of the string to upload.\n     * @return An UploadTask that lets you control and\n     *     observe the upload.\n     */\n    Reference.prototype.putString = function (string, format, opt_metadata) {\n        if (format === void 0) { format = StringFormat.RAW; }\n        args.validate('putString', [\n            args.stringSpec(),\n            args.stringSpec(fbsString.formatValidator, true),\n            args.metadataSpec(true)\n        ], arguments);\n        this.throwIfRoot_('putString');\n        var data = fbsString.dataFromString(format, string);\n        var metadata = object.clone(opt_metadata);\n        if (!type.isDef(metadata['contentType']) && type.isDef(data.contentType)) {\n            metadata['contentType'] = data.contentType;\n        }\n        return new UploadTask(this, this.authWrapper, this.location, this.mappings(), new FbsBlob(data.data, true), metadata);\n    };\n    /**\n     * Deletes the object at this location.\n     * @return A promise that resolves if the deletion succeeds.\n     */\n    Reference.prototype.delete = function () {\n        args.validate('delete', [], arguments);\n        this.throwIfRoot_('delete');\n        var self = this;\n        return this.authWrapper.getAuthToken().then(function (authToken) {\n            var requestInfo = requests.deleteObject(self.authWrapper, self.location);\n            return self.authWrapper.makeRequest(requestInfo, authToken).getPromise();\n        });\n    };\n    /**\n     *     A promise that resolves with the metadata for this object. If this\n     *     object doesn't exist or metadata cannot be retreived, the promise is\n     *     rejected.\n     */\n    Reference.prototype.getMetadata = function () {\n        args.validate('getMetadata', [], arguments);\n        this.throwIfRoot_('getMetadata');\n        var self = this;\n        return this.authWrapper.getAuthToken().then(function (authToken) {\n            var requestInfo = requests.getMetadata(self.authWrapper, self.location, self.mappings());\n            return self.authWrapper.makeRequest(requestInfo, authToken).getPromise();\n        });\n    };\n    /**\n     * Updates the metadata for this object.\n     * @param metadata The new metadata for the object.\n     *     Only values that have been explicitly set will be changed. Explicitly\n     *     setting a value to null will remove the metadata.\n     * @return A promise that resolves\n     *     with the new metadata for this object.\n     *     @see firebaseStorage.Reference.prototype.getMetadata\n     */\n    Reference.prototype.updateMetadata = function (metadata) {\n        args.validate('updateMetadata', [args.metadataSpec()], arguments);\n        this.throwIfRoot_('updateMetadata');\n        var self = this;\n        return this.authWrapper.getAuthToken().then(function (authToken) {\n            var requestInfo = requests.updateMetadata(self.authWrapper, self.location, metadata, self.mappings());\n            return self.authWrapper.makeRequest(requestInfo, authToken).getPromise();\n        });\n    };\n    /**\n     * @return A promise that resolves with the download\n     *     URL for this object.\n     */\n    Reference.prototype.getDownloadURL = function () {\n        args.validate('getDownloadURL', [], arguments);\n        this.throwIfRoot_('getDownloadURL');\n        return this.getMetadata().then(function (metadata) {\n            var url = metadata['downloadURLs'][0];\n            if (type.isDef(url)) {\n                return url;\n            }\n            else {\n                throw errorsExports.noDownloadURL();\n            }\n        });\n    };\n    Reference.prototype.throwIfRoot_ = function (name) {\n        if (this.location.path === '') {\n            throw errorsExports.invalidRootOperation(name);\n        }\n    };\n    return Reference;\n}());\nexport { Reference };\n\n//# sourceMappingURL=reference.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/reference.js","import * as promiseimpl from './promise_external';\n/**\n * A request whose promise always fails.\n * @struct\n * @template T\n */\nvar FailRequest = /** @class */ (function () {\n    function FailRequest(error) {\n        this.promise_ = promiseimpl.reject(error);\n    }\n    /** @inheritDoc */\n    FailRequest.prototype.getPromise = function () {\n        return this.promise_;\n    };\n    /** @inheritDoc */\n    FailRequest.prototype.cancel = function (appDelete) {\n        if (appDelete === void 0) { appDelete = false; }\n    };\n    return FailRequest;\n}());\nexport { FailRequest };\n\n//# sourceMappingURL=failrequest.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/failrequest.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as object from './object';\nimport * as constants from './constants';\n/**\n * @struct\n */\nvar RequestMap = /** @class */ (function () {\n    function RequestMap() {\n        this.map_ = {};\n        this.id_ = constants.minSafeInteger;\n    }\n    /**\n     * Registers the given request with this map.\n     * The request is unregistered when it completes.\n     * @param r The request to register.\n     */\n    RequestMap.prototype.addRequest = function (r) {\n        var id = this.id_;\n        this.id_++;\n        this.map_[id] = r;\n        var self = this;\n        function unmap() {\n            delete self.map_[id];\n        }\n        r.getPromise().then(unmap, unmap);\n    };\n    /**\n     * Cancels all registered requests.\n     */\n    RequestMap.prototype.clear = function () {\n        object.forEach(this.map_, function (key, val) {\n            if (val) {\n                val.cancel(true);\n            }\n        });\n        this.map_ = {};\n    };\n    return RequestMap;\n}());\nexport { RequestMap };\n\n//# sourceMappingURL=requestmap.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/requestmap.js","import * as constants from './constants';\nimport * as errorsExports from './error';\nimport { FailRequest } from './failrequest';\nimport { Location } from './location';\nimport * as promiseimpl from './promise_external';\nimport { RequestMap } from './requestmap';\nimport * as type from './type';\n/**\n * @param app If null, getAuthToken always resolves with null.\n * @param service The storage service associated with this auth wrapper.\n *     Untyped to avoid circular type dependencies.\n * @struct\n */\nvar AuthWrapper = /** @class */ (function () {\n    function AuthWrapper(app, maker, requestMaker, service, pool) {\n        this.bucket_ = null;\n        this.deleted_ = false;\n        this.app_ = app;\n        if (this.app_ !== null) {\n            var options = this.app_.options;\n            if (type.isDef(options)) {\n                this.bucket_ = AuthWrapper.extractBucket_(options);\n            }\n        }\n        this.storageRefMaker_ = maker;\n        this.requestMaker_ = requestMaker;\n        this.pool_ = pool;\n        this.service_ = service;\n        this.maxOperationRetryTime_ = constants.defaultMaxOperationRetryTime;\n        this.maxUploadRetryTime_ = constants.defaultMaxUploadRetryTime;\n        this.requestMap_ = new RequestMap();\n    }\n    AuthWrapper.extractBucket_ = function (config) {\n        var bucketString = config[constants.configOption] || null;\n        if (bucketString == null) {\n            return null;\n        }\n        var loc = Location.makeFromBucketSpec(bucketString);\n        return loc.bucket;\n    };\n    AuthWrapper.prototype.getAuthToken = function () {\n        // TODO(andysoto): remove ifDef checks after firebase-app implements stubs\n        // (b/28673818).\n        if (this.app_ !== null &&\n            type.isDef(this.app_.INTERNAL) &&\n            type.isDef(this.app_.INTERNAL.getToken)) {\n            return this.app_.INTERNAL.getToken().then(function (response) {\n                if (response !== null) {\n                    return response.accessToken;\n                }\n                else {\n                    return null;\n                }\n            }, function (_error) {\n                return null;\n            });\n        }\n        else {\n            return promiseimpl.resolve(null);\n        }\n    };\n    AuthWrapper.prototype.bucket = function () {\n        if (this.deleted_) {\n            throw errorsExports.appDeleted();\n        }\n        else {\n            return this.bucket_;\n        }\n    };\n    /**\n     * The service associated with this auth wrapper. Untyped to avoid circular\n     * type dependencies.\n     */\n    AuthWrapper.prototype.service = function () {\n        return this.service_;\n    };\n    /**\n     * Returns a new firebaseStorage.Reference object referencing this AuthWrapper\n     * at the given Location.\n     * @param loc The Location.\n     * @return Actually a firebaseStorage.Reference, typing not allowed\n     *     because of circular dependency problems.\n     */\n    AuthWrapper.prototype.makeStorageReference = function (loc) {\n        return this.storageRefMaker_(this, loc);\n    };\n    AuthWrapper.prototype.makeRequest = function (requestInfo, authToken) {\n        if (!this.deleted_) {\n            var request = this.requestMaker_(requestInfo, authToken, this.pool_);\n            this.requestMap_.addRequest(request);\n            return request;\n        }\n        else {\n            return new FailRequest(errorsExports.appDeleted());\n        }\n    };\n    /**\n     * Stop running requests and prevent more from being created.\n     */\n    AuthWrapper.prototype.deleteApp = function () {\n        this.deleted_ = true;\n        this.app_ = null;\n        this.requestMap_.clear();\n    };\n    AuthWrapper.prototype.maxUploadRetryTime = function () {\n        return this.maxUploadRetryTime_;\n    };\n    AuthWrapper.prototype.setMaxUploadRetryTime = function (time) {\n        this.maxUploadRetryTime_ = time;\n    };\n    AuthWrapper.prototype.maxOperationRetryTime = function () {\n        return this.maxOperationRetryTime_;\n    };\n    AuthWrapper.prototype.setMaxOperationRetryTime = function (time) {\n        this.maxOperationRetryTime_ = time;\n    };\n    return AuthWrapper;\n}());\nexport { AuthWrapper };\n\n//# sourceMappingURL=authwrapper.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/authwrapper.js","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @param f May be invoked\n *     before the function returns.\n * @param callback Get all the arguments passed to the function\n *     passed to f, including the initial boolean.\n */\nexport function start(f, callback, timeout) {\n    // TODO(andysoto): make this code cleaner (probably refactor into an actual\n    // type instead of a bunch of functions with state shared in the closure)\n    var waitSeconds = 1;\n    // Would type this as \"number\" but that doesn't work for Node so ¯\\_(ツ)_/¯\n    var timeoutId = null;\n    var hitTimeout = false;\n    var cancelState = 0;\n    function canceled() {\n        return cancelState === 2;\n    }\n    var triggeredCallback = false;\n    function triggerCallback() {\n        if (!triggeredCallback) {\n            triggeredCallback = true;\n            callback.apply(null, arguments);\n        }\n    }\n    function callWithDelay(millis) {\n        timeoutId = setTimeout(function () {\n            timeoutId = null;\n            f(handler, canceled());\n        }, millis);\n    }\n    function handler(success) {\n        var var_args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            var_args[_i - 1] = arguments[_i];\n        }\n        if (triggeredCallback) {\n            return;\n        }\n        if (success) {\n            triggerCallback.apply(null, arguments);\n            return;\n        }\n        var mustStop = canceled() || hitTimeout;\n        if (mustStop) {\n            triggerCallback.apply(null, arguments);\n            return;\n        }\n        if (waitSeconds < 64) {\n            /* TODO(andysoto): don't back off so quickly if we know we're offline. */\n            waitSeconds *= 2;\n        }\n        var waitMillis;\n        if (cancelState === 1) {\n            cancelState = 2;\n            waitMillis = 0;\n        }\n        else {\n            waitMillis = (waitSeconds + Math.random()) * 1000;\n        }\n        callWithDelay(waitMillis);\n    }\n    var stopped = false;\n    function stop(wasTimeout) {\n        if (stopped) {\n            return;\n        }\n        stopped = true;\n        if (triggeredCallback) {\n            return;\n        }\n        if (timeoutId !== null) {\n            if (!wasTimeout) {\n                cancelState = 2;\n            }\n            clearTimeout(timeoutId);\n            callWithDelay(0);\n        }\n        else {\n            if (!wasTimeout) {\n                cancelState = 1;\n            }\n        }\n    }\n    callWithDelay(0);\n    setTimeout(function () {\n        hitTimeout = true;\n        stop(true);\n    }, timeout);\n    return stop;\n}\n/**\n * Stops the retry loop from repeating.\n * If the function is currently \"in between\" retries, it is invoked immediately\n * with the second parameter as \"true\". Otherwise, it will be invoked once more\n * after the current invocation finishes iff the current invocation would have\n * triggered another retry.\n */\nexport function stop(id) {\n    id(false);\n}\n\n//# sourceMappingURL=backoff.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/storage/dist/esm/src/implementation/backoff.js\n// module id = null\n// module chunks = ","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as args from './implementation/args';\nimport { AuthWrapper } from './implementation/authwrapper';\nimport { Location } from './implementation/location';\nimport * as fbsPromiseImpl from './implementation/promise_external';\nimport * as RequestExports from './implementation/request';\nimport { Reference } from './reference';\n/**\n * A service that provides firebaseStorage.Reference instances.\n * @param opt_url gs:// url to a custom Storage Bucket\n *\n * @struct\n */\nvar Service = /** @class */ (function () {\n    function Service(app, pool, url) {\n        this.bucket_ = null;\n        function maker(authWrapper, loc) {\n            return new Reference(authWrapper, loc);\n        }\n        this.authWrapper_ = new AuthWrapper(app, maker, RequestExports.makeRequest, this, pool);\n        this.app_ = app;\n        if (url != null) {\n            this.bucket_ = Location.makeFromBucketSpec(url);\n        }\n        else {\n            var authWrapperBucket = this.authWrapper_.bucket();\n            if (authWrapperBucket != null) {\n                this.bucket_ = new Location(authWrapperBucket, '');\n            }\n        }\n        this.internals_ = new ServiceInternals(this);\n    }\n    /**\n     * Returns a firebaseStorage.Reference for the given path in the default\n     * bucket.\n     */\n    Service.prototype.ref = function (path) {\n        function validator(path) {\n            if (/^[A-Za-z]+:\\/\\//.test(path)) {\n                throw 'Expected child path but got a URL, use refFromURL instead.';\n            }\n        }\n        args.validate('ref', [args.stringSpec(validator, true)], arguments);\n        if (this.bucket_ == null) {\n            throw new Error('No Storage Bucket defined in Firebase Options.');\n        }\n        var ref = new Reference(this.authWrapper_, this.bucket_);\n        if (path != null) {\n            return ref.child(path);\n        }\n        else {\n            return ref;\n        }\n    };\n    /**\n     * Returns a firebaseStorage.Reference object for the given absolute URL,\n     * which must be a gs:// or http[s]:// URL.\n     */\n    Service.prototype.refFromURL = function (url) {\n        function validator(p) {\n            if (!/^[A-Za-z]+:\\/\\//.test(p)) {\n                throw 'Expected full URL but got a child path, use ref instead.';\n            }\n            try {\n                Location.makeFromUrl(p);\n            }\n            catch (e) {\n                throw 'Expected valid full URL but got an invalid one.';\n            }\n        }\n        args.validate('refFromURL', [args.stringSpec(validator, false)], arguments);\n        return new Reference(this.authWrapper_, url);\n    };\n    Object.defineProperty(Service.prototype, \"maxUploadRetryTime\", {\n        get: function () {\n            return this.authWrapper_.maxUploadRetryTime();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Service.prototype.setMaxUploadRetryTime = function (time) {\n        args.validate('setMaxUploadRetryTime', [args.nonNegativeNumberSpec()], arguments);\n        this.authWrapper_.setMaxUploadRetryTime(time);\n    };\n    Object.defineProperty(Service.prototype, \"maxOperationRetryTime\", {\n        get: function () {\n            return this.authWrapper_.maxOperationRetryTime();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Service.prototype.setMaxOperationRetryTime = function (time) {\n        args.validate('setMaxOperationRetryTime', [args.nonNegativeNumberSpec()], arguments);\n        this.authWrapper_.setMaxOperationRetryTime(time);\n    };\n    Object.defineProperty(Service.prototype, \"app\", {\n        get: function () {\n            return this.app_;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Service.prototype, \"INTERNAL\", {\n        get: function () {\n            return this.internals_;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Service;\n}());\nexport { Service };\n/**\n * @struct\n */\nvar ServiceInternals = /** @class */ (function () {\n    function ServiceInternals(service) {\n        this.service_ = service;\n    }\n    /**\n     * Called when the associated app is deleted.\n     * @see {!fbs.AuthWrapper.prototype.deleteApp}\n     */\n    ServiceInternals.prototype.delete = function () {\n        this.service_.authWrapper_.deleteApp();\n        return fbsPromiseImpl.resolve(undefined);\n    };\n    return ServiceInternals;\n}());\nexport { ServiceInternals };\n\n//# sourceMappingURL=service.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@firebase/storage/dist/esm/src/service.js"]}